{"version":3,"sources":["webpack:///./dist/ng-mesh-viewer/fesm5/ng-mesh-viewer.js","webpack:///./dist/ng-plan/fesm5/ng-plan.js","webpack:///./node_modules/n3/lib sync ^\\.\\/N3.*$","webpack:///(webpack)/buildin/global.js","webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/app.service.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts","webpack:///util (ignored)","webpack:///util (ignored)?ff10","webpack:///vertx (ignored)"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAqD;AAC6D;AAClH;AACwM;AACxM;AACwB;AACG;AACJ;;AAEvB;AACA;AACA,cAAc,oCAAoC;AAClD;AACA;AACA;AACA;AACA;AACA,2BAA2B,EAAE;AAC7B;AACA;AACA,2BAA2B,EAAE;AAC7B;AACA;AACA,2BAA2B,EAAE;AAC7B;AACA,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2BAA2B,EAAE;AAC7B;AACA;AACA,2BAA2B,EAAE;AAC7B;AACA;AACA,4CAA4C,wBAAwB,EAAE;AACtE,2BAA2B,EAAE;AAC7B;AACA,2BAA2B,EAAE;AAC7B;AACA,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2BAA2B,EAAE;AAC7B;AACA,2BAA2B,EAAE;AAC7B,oFAA8C,wBAAwB;AACtE,2BAA2B,EAAE;AAC7B;AACA;AACA;AACA,mCAAmC,EAAE;AACrC;AACA,mCAAmC,EAAE;AACrC,wEAAwE,2BAA2B,EAAE;AACrG;AACA;AACA;AACA,uCAAuC,EAAE;AACzC;AACA,uCAAuC,EAAE;AACzC;AACA;AACA,uCAAuC,EAAE;AACzC;AACA;AACA,yBAAyB;AACzB;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,EAAE;AACzC;AACA,uCAAuC,EAAE;AACzC;AACA;AACA;AACA,+CAA+C,EAAE;AACjD;AACA,+CAA+C,EAAE;AACjD;AACA,+CAA+C,EAAE;AACjD;AACA,+CAA+C,EAAE;AACjD;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,uCAAuC,EAAE;AACzC;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,+CAA+C,+DAA+D;AAC9G;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,iBAAiB,IAAI;AACrB;AACA;AACA,sDAAsD,WAAW;AACjE,qIAA+E,kDAAkD,kCAAkC,EAAE,kDAAkD;AACvN;AACA,CAAC;;AAED;AACA;AACA,cAAc,oCAAoC;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8FAAwD,8BAA8B;AACtF,0FAAoD,gCAAgC;AACpF;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,uBAAuB,EAAE;AACzB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,mBAAmB,EAAE;AACrB;AACA;AACA,mBAAmB,EAAE;AACrB;AACA;AACA;AACA,mBAAmB,EAAE;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,mBAAmB,EAAE;AACrB;AACA,iFAA2C,+CAA+C;AAC1F;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,mBAAmB,EAAE;AACrB;AACA,mBAAmB,EAAE;AACrB;AACA;AACA;AACA;AACA;AACA,6HAA+E,kBAAkB;AACjG;AACA,2BAA2B,EAAE;AAC7B;AACA,2BAA2B,EAAE;AAC7B;AACA,2BAA2B,EAAE;AAC7B;AACA,2BAA2B,EAAE;AAC7B,4FAAsD,2HAAqF;AAC3I;AACA,2BAA2B,EAAE;AAC7B;AACA;AACA;AACA;AACA;AACA,mCAAmC,EAAE;AACrC;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,mCAAmC,EAAE;AACrC;AACA,mCAAmC,EAAE;AACrC;AACA;AACA,mCAAmC,EAAE;AACrC;AACA;AACA,mCAAmC,EAAE;AACrC;AACA,mCAAmC,EAAE;AACrC,4FAAsD,gDAAgD;AACtG,mCAAmC,EAAE;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,mBAAmB,EAAE;AACrB;AACA,mBAAmB,EAAE;AACrB;AACA,mBAAmB,EAAE;AACrB;AACA,mBAAmB,EAAE;AACrB,uBAAuB;AACvB;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,mBAAmB,EAAE;AACrB;AACA,mBAAmB,EAAE;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,EAAE;AACrB;AACA;AACA;AACA,mBAAmB,EAAE;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,mBAAmB,EAAE;AACrB;AACA;AACA;AACA,mBAAmB,EAAE;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,mBAAmB,EAAE;AACrB;AACA;AACA,mBAAmB,EAAE;AACrB;AACA;AACA,mBAAmB,EAAE;AACrB;AACA;AACA,uBAAuB,EAAE;AACzB,oDAAoD,gCAAgC,EAAE;AACtF;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,qCAAqC,WAAW,YAAY,YAAY,kBAAkB,YAAY,YAAY,WAAW,eAAe,SAAS,eAAe;AACpK;AACA,iBAAiB,IAAI;AACrB;AACA;AACA,wDAAwD;AACxD,SAAS;AACT,MAAM;AACN;AACA,uBAAuB,6DAAe;AACtC,yBAAyB,6DAAe;AACxC,gBAAgB,4DAAc;AAC9B,yBAAyB,4DAAc;AACvC,2BAA2B,4DAAc;AACzC,qBAAqB,mFAAqC;AAC1D,oBAAoB,yGAA2D;AAC/E;AACA;AACA,CAAC;;AAED;AACA;AACA,cAAc,oCAAoC;AAClD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB,IAAI;AACrB;AACA;AACA,CAAC;;AAED;AACA;AACA,cAAc,oCAAoC;AAClD;;AAEA;AACA;AACA,cAAc,oCAAoC;AAClD;;AAEQ;;AAER,2CAA2C,cAAc,u2pC;;;;;;;;;;;;;;;;;;;;;;;;AC1kBsC;AACrE;AACH;AACH;AACM;AACH;AACW;AACQ;;AAE1C;AACA;AACA,cAAc,WAAW;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,2BAA2B,EAAE,8CAA8C,uBAAuB,EAAE;AACpG;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,uBAAuB,EAAE;AACzB,uBAAuB,EAAE;AACzB;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,EAAE;AACzB,uBAAuB,EAAE;AACzB,uBAAuB,EAAE;AACzB,uBAAuB,EAAE;AACzB;AACA,2BAA2B,EAAE;AAC7B,2BAA2B,EAAE;AAC7B,2BAA2B,EAAE;AAC7B;AACA,+BAA+B,EAAE,sBAAsB;AACvD;AACA,mCAAmC,EAAE;AACrC,mCAAmC,EAAE;AACrC;AACA;AACA,uCAAuC,EAAE;AACzC,uCAAuC,EAAE,uBAAuB;AAChE;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,2CAA2C;AAC3C,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,2BAA2B,EAAE;AAC7B,2BAA2B,EAAE;AAC7B,2BAA2B,EAAE;AAC7B,2BAA2B,EAAE;AAC7B;AACA;AACA;AACA,oBAAoB;AACpB,SAAS;AACT;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,uBAAuB,EAAE;AACzB,uBAAuB,EAAE;AACzB,uBAAuB,EAAE;AACzB;AACA,uBAAuB,EAAE;AACzB,uBAAuB,EAAE;AACzB,uBAAuB,EAAE;AACzB,uBAAuB,EAAE;AACzB;AACA,uBAAuB,EAAE;AACzB,uBAAuB,EAAE;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA,uBAAuB,EAAE;AACzB;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,uBAAuB,EAAE;AACzB;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,GAAG;AAClB,gBAAgB;AAChB;AACA;AACA,eAAe,GAAG;AAClB,eAAe,GAAG;AAClB,gBAAgB;AAChB;AACA;AACA,uBAAuB,EAAE;AACzB;AACA,2BAA2B,EAAE;AAC7B,2BAA2B,EAAE;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,IAAI,GAAG,IAAI;AAC/C;AACA;AACA,uBAAuB,EAAE;AACzB,uBAAuB,EAAE;AACzB,uBAAuB,EAAE;AACzB,uBAAuB,EAAE;AACzB;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA,uBAAuB,EAAE;AACzB,uBAAuB,EAAE;AACzB,uBAAuB,EAAE;AACzB,uBAAuB,EAAE;AACzB,uBAAuB,EAAE;AACzB,uBAAuB,EAAE;AACzB,uBAAuB,EAAE;AACzB,uBAAuB,EAAE;AACzB;AACA,+BAA+B,0CAA0C;AACzE;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,+/DAA+/D,aAAa,iPAAiP,WAAW,qMAAqM,aAAa,kNAAkN,kBAAkB;AAC9rF,sCAAsC,yBAAyB,sBAAsB,qBAAqB,iBAAiB,WAAW,YAAY,eAAe,MAAM,OAAO,SAAS,QAAQ,WAAW,SAAS,YAAY,eAAe,iCAAiC,kBAAkB,YAAY,WAAW,eAAe,gBAAgB,eAAe,SAAS,kBAAkB,UAAU,WAAW,WAAW,oBAAoB,YAAY,yBAAyB,sBAAsB,qBAAqB,iBAAiB,sCAAsC,iBAAiB,kBAAkB,gBAAgB,YAAY,UAAU,UAAU,qBAAqB,eAAe,YAAY,WAAW,WAAW,gBAAgB,eAAe,oBAAoB,QAAQ,sCAAsC,kBAAkB,qBAAqB,eAAe,eAAe,kBAAkB,YAAY;AACz5B,iBAAiB,IAAI;AACrB;AACA;AACA,gDAAgD;AAChD,SAAS,gFAAyB;AAClC,SAAS,gFAAsB;AAC/B,MAAM;AACN;AACA,yBAAyB,6DAAe;AACxC,2BAA2B,6DAAe;AAC1C,kBAAkB,4DAAc;AAChC,oBAAoB,4DAAc;AAClC,uBAAuB,4DAAc;AACrC,qBAAqB,4DAAc;AACnC,sBAAsB,4DAAc;AACpC,2BAA2B,4DAAc;AACzC,0BAA0B,4DAAc;AACxC,2BAA2B,mFAAqC;AAChE;AACA;AACA,CAAC;;AAED;AACA;AACA,cAAc,WAAW;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,uBAAuB,EAAE,kCAAkC;AAC3D,uBAAuB,EAAE;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,wEAA0B,6BAA6B,IAAI;AACpE;AACA;AACA;AACA,qBAAqB,6DAAe;AACpC,oBAAoB,6DAAe;AACnC,sBAAsB,6DAAe;AACrC,kBAAkB,6DAAe;AACjC,qBAAqB,6DAAe;AACpC,qBAAqB,6DAAe;AACpC,yBAAyB,6DAAe;AACxC,gCAAgC,sGAAwD;AACxF,iCAAiC,0GAA4D;AAC7F,4BAA4B,wGAA0D;AACtF,uBAAuB,4GAA8D;AACrF,qBAAqB,0GAA4D;AACjF,0BAA0B,qGAAuD;AACjF,yBAAyB,qGAAuD;AAChF,uBAAuB,mGAAqD;AAC5E;AACA;AACA,CAAC;;AAED;AACA;AACA,cAAc,WAAW;AACzB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,IAAI;AACrB;AACA;AACA,CAAC;;AAED;AACA;AACA,cAAc,WAAW;AACzB;;AAEA;AACA;AACA,cAAc,WAAW;AACzB;;AAEQ;;AAER,2CAA2C,cAAc,mprC;;;;;;;;;;;AC/lBzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wE;;;;;;;;;;;ACrCA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,4E;;;;;;;;;;;ACZA,8BAA8B,2BAA2B,qBAAqB,KAAK,0BAA0B,2BAA2B,KAAK,eAAe,kBAAkB,KAAK,eAAe,2BAA2B,oBAAoB,mBAAmB,+CAA+C,2BAA2B,4BAA4B,yBAAyB,qBAAqB,qBAAqB,KAAK,C;;;;;;;;;;;ACAlb,4OAA4O,KAAK,6uB;;;;;;;;;;;;;;;;;;;;;;;;;;ACA/L;AAEA;AACP;AAQ3C;IAQE,sBACU,IAAgB,EAChB,EAAc;QADd,SAAI,GAAJ,IAAI,CAAY;QAChB,OAAE,GAAF,EAAE,CAAY;QALjB,YAAO,GAAG,CAAC,SAAS,EAAE,gBAAgB,CAAC,CAAC;QACxC,mBAAc,GAAG,SAAS,CAAC;IAK9B,CAAC;IAEL,+BAAQ,GAAR;QACE,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;IAC/B,CAAC;IAED,mCAAY,GAAZ,UAAa,IAAI;QAAjB,iBAmBC;QAjBC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAE3B,EAAE,EAAC,IAAI,IAAI,SAAS,CAAC,EAAC;YACpB,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC,SAAS,CAAC,aAAG;gBACpD,KAAI,CAAC,IAAI,GAAG,GAAG,CAAC;YAClB,CAAC,CAAC;QACJ,CAAC;QAED,EAAE,EAAC,IAAI,IAAI,gBAAgB,CAAC,EAAC;YAE3B,IAAI,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,aAAG;gBAChC,KAAI,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;gBACrB,KAAI,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;YACzB,CAAC,EAAE,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAhB,CAAgB,CAAC,CAAC;QAE9B,CAAC;IAEH,CAAC;IAED,gCAAS,GAAT,UAAU,EAAE;QACV,IAAI,CAAC,cAAc,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;IACjC,CAAC;IAED,0BAAG,GAAH,UAAI,EAAE;QAAN,iBAgBC;QAfC,IAAI,GAAG,GAAG,EAAE,CAAC,GAAG,CAAC;QACjB,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAEjB,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,aAAG;YAChC,EAAE,EAAC,GAAG,IAAI,OAAO,CAAC,EAAC;gBACjB,KAAI,CAAC,EAAE,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,aAAG;oBACvC,KAAI,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;oBACrB,KAAI,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;gBACzB,CAAC,EAAE,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAhB,CAAgB,CAAC,CAAC;YAC9B,CAAC;YAAA,IAAI,EAAC;gBACJ,KAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAC;YACtC,CAAC;QACH,CAAC,EAAE,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAhB,CAAgB,CAAC,CAAC;IAG9B,CAAC;IAED,kCAAW,GAAX;QACE,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;IAC3B,CAAC;IA9DU,YAAY;QANxB,+DAAS,CAAC;YACT,QAAQ,EAAE,UAAU;;;YAGpB,SAAS,EAAE,CAAE,uDAAU,CAAE;SAC1B,CAAC;yCAUgB,+DAAU;YACZ,uDAAU;OAVb,YAAY,CAgExB;IAAD,mBAAC;CAAA;AAhEwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACXiC;AACF;AACf;AACsC;AAE/E,kBAAkB;AACmB;AACa;AAElD,mBAAmB;AACiC;AAEpD,YAAY;AACgD;AAE5D,gBAAgB;AAC6C;AAEd;AAmB/C;IAAA;IAAyB,CAAC;IAAb,SAAS;QAjBrB,8DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,2DAAY;aACb;YACD,OAAO,EAAE;gBACP,uEAAa;gBACb,qEAAgB;gBAChB,kDAAU;gBACV,+DAAgB;gBAChB,iEAAe;gBACf,4FAAuB;gBACvB,yEAAsB;gBACtB,0EAAoB;aACrB;YACD,SAAS,EAAE,EAAE;YACb,SAAS,EAAE,CAAC,2DAAY,CAAC;SAC1B,CAAC;OACW,SAAS,CAAI;IAAD,gBAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrCqB;AACN;AACG;AACH;AACa;AAIlD;IAgBI,oBAAoB,IAAgB;QAAhB,SAAI,GAAJ,IAAI,CAAY;QAdpC,wBAAwB;QACxB,iCAAiC;QACjC,qCAAqC;QACrC,mCAAmC;QACnC,uCAAuC;QACvC,KAAK;QACG,cAAS,GAAG;YAChB,sBAAsB;YACtB,6BAA6B;YAC7B,0BAA0B;YAC1B,wBAAwB;SAC3B,CAAC;IAGuC,CAAC;IAEnC,6BAAQ,GAAf,UAAgB,KAAK;QAEjB,MAAM,CAAC,iDAAI,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;QACvC,kEAAkE;IAEtE,CAAC;IAEM,4BAAO,GAAd,UAAe,GAAG;QACd,IAAI,CAAC,GAAG,0BAAwB,GAAG,eAAY,CAAC;QAEhD,MAAM,CAAC,iDAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;aAC7B,IAAI,CACD,0DAAG,CAAC,cAAI;YACJ,IAAI,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,WAAC;gBAClB,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,4BAA4B,CAAC;YACxD,CAAC,CAAC,CAAC;YACH,EAAE,EAAC,EAAE,CAAC,MAAM,IAAI,CAAC,CAAC,EAAC;gBACf,MAAM,CAAC,OAAO,CAAC;YACnB,CAAC;YAAA,IAAI,EAAC;gBACF,MAAM,CAAC,SAAS,CAAC;YACrB,CAAC;QACL,CAAC,CAAC,CACL,CAAC;IACV,CAAC;IAEM,kCAAa,GAApB;QACI,IAAI,CAAC,GAAG,gjBAaP,CAAC;QAEF,MAAM,CAAC,iDAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;aACzB,IAAI,CACD,0DAAG,CAAC,cAAI;YACJ,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,cAAI;gBAChB,MAAM,CAAC;oBACH,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK;oBACrB,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK;oBACnB,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK;iBAChC;YACL,CAAC,CAAC;QACN,CAAC,CAAC,CACL,CAAC;IACd,CAAC;IAEM,mCAAc,GAArB,UAAsB,QAAQ;QAC1B,IAAI,CAAC,GAAG,iTAOG,QAAQ,8RAMlB,CAAC;QAEF,MAAM,CAAC,iDAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;aACzB,IAAI,CACD,0DAAG,CAAC,cAAI;YACJ,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,cAAI;gBACjB,MAAM,CAAC;oBACH,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK;oBACrB,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK;oBACnB,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK;iBAChC;YACL,CAAC,CAAC,CAAC;YACH,MAAM,CAAC,EAAC,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAC,CAAC;QAC/B,CAAC,CAAC,CACL,CAAC;IACd,CAAC;IAEM,+BAAU,GAAjB;QAEI,IAAI,CAAC,GAAG,+jBAaP,CAAC;QAEF,MAAM,CAAC,iDAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;aACzB,IAAI,CACD,0DAAG,CAAC,cAAI;YACJ,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,cAAI;gBACjB,MAAM,CAAC;oBACH,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK;oBACrB,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK;oBACnB,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK;iBAChC;YACL,CAAC,CAAC,CAAC;YACH,MAAM,CAAC,EAAC,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAC,CAAC;QAC/B,CAAC,CAAC,CACL,CAAC;IAEd,CAAC;IAEa,kCAAa,GAA3B,UAA4B,KAAK;;;;;;6BAG1B,CAAC,IAAI,CAAC,KAAK,EAAX,wBAAW;wBAEN,kBAAkB,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;wBAGzC,QAAQ,GAAG,EAAE,CAAC;wBAClB,GAAG,QAAwB,EAAd,SAAI,CAAC,SAAS,EAAd,cAAc,EAAd,IAAc;4BAAnB,CAAC;4BACD,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,EAAC,YAAY,EAAE,MAAM,EAAC,CAAC,CAAC,SAAS,EAAE,CAAC;4BACnE,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;yBAC1B;wBAGa,qBAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC;;wBAArC,OAAO,GAAG,SAA2B;wBACzC,SAAI;wBAAS,qBAAM,kBAAkB;;wBAArC,GAAK,KAAK,GAAG,SAAwB,CAAC;wBAGlC,OAAO,GAAG,CAAC,CAAC;8BACI,EAAP,mBAAO;;;6BAAP,sBAAO;wBAAZ,CAAC;wBACU,qBAAM,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;;wBAAxD,QAAQ,GAAG,SAA6C;wBAC5D,OAAO,IAAG,MAAM,CAAC,QAAQ,CAAC,CAAC;;;wBAFlB,IAAO;;;wBAKpB,OAAO,CAAC,GAAG,CAAC,QAAQ,GAAG,OAAO,GAAG,qBAAqB,CAAC,CAAC;;;wBAKxD,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;wBAExD,sBAAO,WAAW,EAAC;;;;KAEtB;IAEO,iCAAY,GAApB;QACI,MAAM,CAAC,IAAI,OAAO,CAAE,UAAC,OAAO,EAAE,MAAM;YAChC,+CAAe,CAAC,UAAC,GAAG,EAAE,KAAK;gBACvB,EAAE,EAAC,GAAG,CAAC;oBAAC,MAAM,CAAC,GAAG,CAAC,CAAC;gBACpB,OAAO,CAAC,KAAK,CAAC,CAAC;YACnB,CAAC,CAAC,CAAC;QACP,CAAC,CAAC;IACN,CAAC;IAEO,wCAAmB,GAA3B,UAA4B,KAAK,EAAE,OAAO,EAAE,QAAS;QACjD,EAAE,EAAC,CAAC,QAAQ,CAAC;YAAC,QAAQ,GAAG,aAAa,CAAC;QACvC,MAAM,CAAC,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YAC/B,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,OAAO,EAAE,UAAC,GAAG,EAAE,IAAI;gBACpC,EAAE,EAAC,GAAG,CAAC;oBAAC,MAAM,CAAC,GAAG,CAAC,CAAC;gBACpB,OAAO,CAAC,IAAI,CAAC,CAAC;YAClB,CAAC,CAAC;QACN,CAAC,CAAC;IACN,CAAC;IAEO,kCAAa,GAArB,UAAsB,KAAK,EAAE,KAAK;QAC9B,MAAM,CAAC,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YAC/B,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,UAAC,GAAG,EAAE,GAAG;gBAC1B,EAAE,EAAC,GAAG,CAAC;oBAAC,MAAM,CAAC,GAAG,CAAC,CAAC;gBACpB,OAAO,CAAC,GAAG,CAAC,CAAC;YACjB,CAAC,CAAC;QACN,CAAC,CAAC;IACN,CAAC;IAEO,kCAAa,GAArB;QAAA,iBAOC;QANG,MAAM,CAAC,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YAC/B,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,UAAC,GAAG,EAAE,KAAK;gBACxB,EAAE,EAAC,GAAG,CAAC;oBAAC,MAAM,CAAC,GAAG,CAAC,CAAC;gBACpB,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACrB,CAAC,CAAC,CAAC;QACP,CAAC,CAAC;IACN,CAAC;IAhNQ,UAAU;QADtB,gEAAU,EAAE;yCAiBiB,+DAAU;OAhB3B,UAAU,CAkNtB;IAAD,iBAAC;CAAA;AAlNsB;;;;;;;;;;;;;;ACRvB;AAAA,gFAAgF;AAChF,2EAA2E;AAC3E,gEAAgE;AAEzD,IAAM,WAAW,GAAG;IACzB,UAAU,EAAE,KAAK;CAClB,CAAC;AAEF;;;;;GAKG;AACH,mEAAmE;;;;;;;;;;;;;;;;;;ACdpB;AAC4B;AAE9B;AACY;AAEzD,EAAE,CAAC,CAAC,qEAAW,CAAC,UAAU,CAAC,CAAC,CAAC;IAC3B,oEAAc,EAAE,CAAC;AACnB,CAAC;AAED,gGAAsB,EAAE,CAAC,eAAe,CAAC,yDAAS,CAAC;KAChD,KAAK,CAAC,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAhB,CAAgB,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;ACXlC,e;;;;;;;;;;;ACAA,e;;;;;;;;;;;ACAA,e","file":"main.js","sourcesContent":["import { __spread, __awaiter, __generator, __values } from 'tslib';\nimport { Injectable, NgModule, defineInjectable, EventEmitter, Component, Output, Input, ViewChild, HostListener } from '@angular/core';\nimport * as THREE from 'three';\nimport { Vector3, Color, PointsMaterial, Box3, Geometry, Points, MeshBasicMaterial, Scene, AmbientLight, PointLight, WebGLRenderer, OBJLoader, DoubleSide, Mesh, PerspectiveCamera, Vector2, Raycaster } from 'three';\nimport OBJLoader$1 from 'three-obj-loader';\nimport { OrbitControls } from '@avatsaev/three-orbitcontrols-ts';\nimport { schemeCategory10 } from 'd3-scale-chromatic';\nimport { CommonModule } from '@angular/common';\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\r\n */\r\nvar NgMeshViewerService = /** @class */ (function () {\r\n    function NgMeshViewerService() {\r\n        this.calculateScaleFactor = function (boundingBox, maxDim) {\r\n            return new Promise(function (resolve, reject) {\r\n                /** @type {?} */\r\n                var size = new Vector3();\r\n                boundingBox.getSize(size);\r\n                /** @type {?} */\r\n                var arr = [];\r\n                size.toArray(arr);\r\n                /** @type {?} */\r\n                var largest = Math.max.apply(Math, __spread(arr));\r\n                /** @type {?} */\r\n                var scaleFactor = maxDim / largest;\r\n                resolve(scaleFactor);\r\n            });\r\n        };\r\n        this.calculateOffsetFactors = function (boundingBox, scaleFactor, maxDim) {\r\n            return new Promise(function (resolve, reject) {\r\n                /** @type {?} */\r\n                var centroid = new Vector3();\r\n                boundingBox.getCenter(centroid);\r\n                /** @type {?} */\r\n                var arr = [];\r\n                centroid.toArray(arr);\r\n                arr = arr.map(function (n) { return n * scaleFactor; });\r\n                /** @type {?} */\r\n                var offsetX = maxDim / 2 - arr[0];\r\n                /** @type {?} */\r\n                var offsetY = maxDim / 2 - arr[1];\r\n                /** @type {?} */\r\n                var offsetZ = maxDim / 2 - arr[2];\r\n                resolve([offsetX, offsetY, offsetZ]);\r\n            });\r\n        };\r\n        this.getBoundingBox = function (data) {\r\n            return new Promise(function (resolve, reject) {\r\n                /** @type {?} */\r\n                var color = new Color(\"#000000\");\r\n                /** @type {?} */\r\n                var mat = new PointsMaterial({ size: 2, color: color });\r\n                /** @type {?} */\r\n                var boundingBox = new Box3();\r\n                data.forEach(function (el) {\r\n                    if (el.geometry) {\r\n                        /** @type {?} */\r\n                        var objLines = el.geometry.split('\\n');\r\n                        /** @type {?} */\r\n                        var verticesArr = objLines.filter(function (l) { return l.startsWith('v '); });\r\n                        verticesArr.forEach(function (v) {\r\n                            // split string ['v', 'xCoordinate', 'yCoordinate', 'zCoordinate']\r\n                            v = v.split(' ');\r\n                            /** @type {?} */\r\n                            var a = new Vector3(v[1], v[2], v[3]);\r\n                            /** @type {?} */\r\n                            var geo = new Geometry();\r\n                            geo.vertices.push(a);\r\n                            /** @type {?} */\r\n                            var point = new Points(geo, mat);\r\n                            boundingBox.expandByObject(point);\r\n                        });\r\n                    }\r\n                });\r\n                resolve(boundingBox);\r\n            });\r\n        };\r\n    }\r\n    /**\r\n     * @param {?} data\r\n     * @return {?}\r\n     */\r\n    NgMeshViewerService.prototype.processOBJ = /**\r\n     * @param {?} data\r\n     * @return {?}\r\n     */\r\n    function (data) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var maxDim, boundingBox, scaleFactor, offset, newData, geometryPreprocessing;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        maxDim = 1;\r\n                        return [4 /*yield*/, this.getBoundingBox(data)];\r\n                    case 1:\r\n                        boundingBox = _a.sent();\r\n                        return [4 /*yield*/, this.calculateScaleFactor(boundingBox, maxDim)];\r\n                    case 2:\r\n                        scaleFactor = _a.sent();\r\n                        return [4 /*yield*/, this.calculateOffsetFactors(boundingBox, scaleFactor, maxDim)];\r\n                    case 3:\r\n                        offset = _a.sent();\r\n                        newData = data.map(function (el) {\r\n                            /** @type {?} */\r\n                            var objLines = el.geometry.split('\\n');\r\n                            /** @type {?} */\r\n                            var objLinesNew = objLines.map(function (l) {\r\n                                // Scale and offset vertices\r\n                                if (l.startsWith('v ')) {\r\n                                    /** @type {?} */\r\n                                    var v = l.split(' ');\r\n                                    /** @type {?} */\r\n                                    var x = v[1] * scaleFactor + offset[0];\r\n                                    /** @type {?} */\r\n                                    var y = v[2] * scaleFactor + offset[1];\r\n                                    /** @type {?} */\r\n                                    var z = v[3] * scaleFactor + offset[2];\r\n                                    // Create new vertice in OBJ syntax\r\n                                    l = \"v \" + x + \" \" + y + \" \" + z;\r\n                                }\r\n                                return l;\r\n                            });\r\n                            /** @type {?} */\r\n                            var geometryNew = objLinesNew.join('\\n');\r\n                            el.geometry = geometryNew;\r\n                            return el;\r\n                        });\r\n                        geometryPreprocessing = {\r\n                            scaleFactor: scaleFactor,\r\n                            offset: offset\r\n                        };\r\n                        return [2 /*return*/, { zones: newData, geometryPreprocessing: geometryPreprocessing }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    NgMeshViewerService.decorators = [\r\n        { type: Injectable, args: [{\r\n                    providedIn: 'root'\r\n                },] },\r\n    ];\r\n    /** @nocollapse */\r\n    NgMeshViewerService.ctorParameters = function () { return []; };\r\n    /** @nocollapse */ NgMeshViewerService.ngInjectableDef = defineInjectable({ factory: function NgMeshViewerService_Factory() { return new NgMeshViewerService(); }, token: NgMeshViewerService, providedIn: \"root\" });\r\n    return NgMeshViewerService;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\r\n */\r\nOBJLoader$1(THREE);\r\nvar NgMeshViewerComponent = /** @class */ (function () {\r\n    function NgMeshViewerComponent(_s) {\r\n        this._s = _s;\r\n        this.clickedRoom = new EventEmitter();\r\n        this.clickedCanvas = new EventEmitter();\r\n        this.showCentroids = true;\r\n        this.showBoundingBox = true;\r\n        this.centroid = new Vector3(0.5, 0.5, 0.5);\r\n        this.highlightMaterial = new MeshBasicMaterial({ color: 0x7c0a02, opacity: 1 });\r\n        this.hoverMaterial = new MeshBasicMaterial({ color: 0x000000, opacity: 0.2 });\r\n        this.canvasClass = 'default';\r\n        this.render = this.render.bind(this);\r\n    }\r\n    /**\r\n     * @param {?} changes\r\n     * @return {?}\r\n     */\r\n    NgMeshViewerComponent.prototype.ngOnChanges = /**\r\n     * @param {?} changes\r\n     * @return {?}\r\n     */\r\n    function (changes) {\r\n        var _this = this;\r\n        if (Array.isArray(changes[\"data\"].currentValue)) {\r\n            this.createScene();\r\n            /** @type {?} */\r\n            var processed = this._s.processOBJ(this.data).then(function (res) {\r\n                _this.spaces = res.zones;\r\n                console.log(_this.spaces);\r\n                _this.appendMeshes(_this.spaces);\r\n            });\r\n            this.createRenderer();\r\n            this.createCamera();\r\n            this.createControls();\r\n            this.render();\r\n        }\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgMeshViewerComponent.prototype.ngAfterViewInit = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgMeshViewerComponent.prototype.render = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this.renderer.render(this.scene, this.camera);\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgMeshViewerComponent.prototype.createScene = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this.scene = new Scene();\r\n        /** @type {?} */\r\n        var ambient = new AmbientLight(0x101030);\r\n        this.scene.add(ambient);\r\n        /** @type {?} */\r\n        var light = new PointLight(0xffffff, 1, 1000);\r\n        light.position.set(0, 0, 1);\r\n        this.scene.add(light);\r\n        /** @type {?} */\r\n        var light = new PointLight(0xffffff, 1, 1000);\r\n        light.position.set(0, 1, 1);\r\n        this.scene.add(light);\r\n        return this.scene;\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgMeshViewerComponent.prototype.createRenderer = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        /** @type {?} */\r\n        var canvas = this.canvasRef.nativeElement;\r\n        this.renderer = new WebGLRenderer({ canvas: canvas, antialias: true, alpha: true });\r\n        this.renderer.setClearColor(0xffffff, 0);\r\n        this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n        return this.renderer;\r\n    };\r\n    /**\r\n     * @param {?} spaces\r\n     * @return {?}\r\n     */\r\n    NgMeshViewerComponent.prototype.appendMeshes = /**\r\n     * @param {?} spaces\r\n     * @return {?}\r\n     */\r\n    function (spaces) {\r\n        /** @type {?} */\r\n        var objLoader = new OBJLoader();\r\n        /** @type {?} */\r\n        var colorScheme = schemeCategory10;\r\n        // Convert to array if only single space received\r\n        if (!Array.isArray(spaces))\r\n            spaces = [spaces];\r\n        try {\r\n            for (var spaces_1 = __values(spaces), spaces_1_1 = spaces_1.next(); !spaces_1_1.done; spaces_1_1 = spaces_1.next()) {\r\n                var space = spaces_1_1.value;\r\n                /** @type {?} */\r\n                var myObj = objLoader.parse(space.geometry);\r\n                /** @type {?} */\r\n                var randInt = Math.floor(Math.random() * 10);\r\n                /** @type {?} */\r\n                var color = new Color(colorScheme[randInt]);\r\n                /** @type {?} */\r\n                var material = new MeshBasicMaterial({ color: color, side: DoubleSide, opacity: 0.5, transparent: true, depthWrite: false });\r\n                myObj.name = space.uri;\r\n                /** @type {?} */\r\n                var invalidPos;\r\n                myObj.traverse(function (child) {\r\n                    if (child instanceof Mesh) {\r\n                        child.name = space.uri;\r\n                        child.material = material;\r\n                        /** @type {?} */\r\n                        var x = child.geometry.clone();\r\n                        invalidPos = x.attributes.position.array.includes(NaN);\r\n                    }\r\n                });\r\n                // Add if not position includes NaN value(s)\r\n                if (!invalidPos) {\r\n                    this.scene.add(myObj);\r\n                    if (this.showCentroids) {\r\n                        /** @type {?} */\r\n                        var bbox = new Box3().setFromObject(myObj);\r\n                        /** @type {?} */\r\n                        var ct = new Vector3();\r\n                        bbox.getCenter(ct);\r\n                        /** @type {?} */\r\n                        var geo = new Geometry();\r\n                        geo.vertices.push(ct);\r\n                        /** @type {?} */\r\n                        var color = new Color(\"#000000\");\r\n                        /** @type {?} */\r\n                        var mat = new PointsMaterial({ size: 2, sizeAttenuation: false, color: color });\r\n                        /** @type {?} */\r\n                        var centroid = new Points(geo, mat);\r\n                        this.scene.add(centroid);\r\n                    }\r\n                }\r\n                else {\r\n                    console.log(\"Space \" + space.uri + \" has invalid position attributes.\");\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (spaces_1_1 && !spaces_1_1.done && (_a = spaces_1.return)) _a.call(spaces_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return;\r\n        var e_1, _a;\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgMeshViewerComponent.prototype.createCamera = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        /** @type {?} */\r\n        var aspectRatio = this.getAspectRatio();\r\n        /** @type {?} */\r\n        var fov = 75;\r\n        /** @type {?} */\r\n        var near = 0.1;\r\n        /** @type {?} */\r\n        var far = 1000; // far plane\r\n        this.camera = new PerspectiveCamera(fov, aspectRatio, near, far);\r\n        this.camera.up.set(0, 0, 1); // z-axis up\r\n        this.camera.lookAt(this.centroid);\r\n        this.camera.position.set(1.1, 0.5, 1.1);\r\n        // fov = 2 * Math.atan( height / ( 2 * dist ) ) * ( 180 / Math.PI );\r\n        this.camera.fov = 2 * Math.atan(1 / (2 * 0.25)) * (180 / Math.PI);\r\n        return this.camera;\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgMeshViewerComponent.prototype.createControls = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this.controls = new OrbitControls(this.camera, this.renderer.domElement);\r\n        this.controls.minPolarAngle = 0;\r\n        this.controls.maxPolarAngle = Math.PI;\r\n        this.controls.minDistance = 0;\r\n        this.controls.maxDistance = 10;\r\n        // set camera to rotate around center of loaded object\r\n        this.controls.target = this.centroid;\r\n        this.controls.addEventListener('change', this.render);\r\n        return this.controls;\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgMeshViewerComponent.prototype.getAspectRatio = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        /** @type {?} */\r\n        var canvas = this.canvasRef.nativeElement;\r\n        /** @type {?} */\r\n        var height = canvas.clientHeight;\r\n        if (height === 0) {\r\n            return 0;\r\n        }\r\n        return canvas.clientWidth / canvas.clientHeight;\r\n    };\r\n    /**\r\n     * @param {?} event\r\n     * @return {?}\r\n     */\r\n    NgMeshViewerComponent.prototype.onMouseDown = /**\r\n     * @param {?} event\r\n     * @return {?}\r\n     */\r\n    function (event) {\r\n        event.preventDefault();\r\n        // Unselect previously selected object\r\n        if (this.selected) {\r\n            this.selected.material = this.previousMaterial;\r\n            this.selected = null;\r\n        }\r\n        /** @type {?} */\r\n        var mouse = new Vector2();\r\n        mouse.x = (event.clientX / this.renderer.domElement.clientWidth) * 2 - 1;\r\n        mouse.y = -(event.clientY / this.renderer.domElement.clientHeight) * 2 + 1;\r\n        /** @type {?} */\r\n        var obj = this.intersectingMesh(mouse);\r\n        // Change color\r\n        if (obj) {\r\n            // Store\r\n            this.selected = obj;\r\n            this.previousMaterial = obj.material;\r\n            // Set new material\r\n            obj.material = this.highlightMaterial;\r\n            // Emit output\r\n            this.clickedRoom.emit({ uri: obj.name });\r\n        }\r\n        this.render();\r\n        return;\r\n    };\r\n    /**\r\n     * @param {?} event\r\n     * @return {?}\r\n     */\r\n    NgMeshViewerComponent.prototype.onMouseMove = /**\r\n     * @param {?} event\r\n     * @return {?}\r\n     */\r\n    function (event) {\r\n        event.preventDefault();\r\n        if (!this.renderer)\r\n            return;\r\n        /** @type {?} */\r\n        var mouse = new Vector2();\r\n        mouse.x = (event.clientX / this.renderer.domElement.clientWidth) * 2 - 1;\r\n        mouse.y = -(event.clientY / this.renderer.domElement.clientHeight) * 2 + 1;\r\n        /** @type {?} */\r\n        var obj = this.intersectingMesh(mouse);\r\n        if (obj) {\r\n            // Save material for later if hover just initiated\r\n            if (obj != this.previousHovered) {\r\n                this.canvasClass = \"clickable\";\r\n                // // Restore material for previously hovered\r\n                // if(this.previousHovered){\r\n                //   this.previousHovered.material = this.previousMaterial;\r\n                // }\r\n                // Set current object to previously hovered\r\n                this.previousHovered = obj;\r\n                // this.previousMaterial = obj.material;\r\n                // // Set hover material on object (if not selected)\r\n                // if(obj != this.selected){\r\n                //   obj.material = this.hoverMaterial;\r\n                // }\r\n            }\r\n        }\r\n        else {\r\n            if (this.previousHovered) {\r\n                this.canvasClass = \"default\";\r\n                // if(this.previousHovered != this.selected){\r\n                //   // Restore material for previously hovered and set previously hovered to null\r\n                //   this.previousHovered.material = this.previousMaterial;\r\n                // }\r\n                this.previousHovered = null;\r\n            }\r\n        }\r\n        this.render();\r\n        return;\r\n    };\r\n    /**\r\n     * @param {?} pred\r\n     * @param {?} parent\r\n     * @return {?}\r\n     */\r\n    NgMeshViewerComponent.prototype.findAllObjects = /**\r\n     * @param {?} pred\r\n     * @param {?} parent\r\n     * @return {?}\r\n     */\r\n    function (pred, parent) {\r\n        var _this = this;\r\n        // NOTE: Better to keep separate array of selected objects\r\n        if (parent.children.length > 0) {\r\n            parent.children.forEach(function (i) {\r\n                pred.push(i);\r\n                _this.findAllObjects(pred, i);\r\n            });\r\n        }\r\n        return;\r\n    };\r\n    /**\r\n     * @param {?} mouse\r\n     * @return {?}\r\n     */\r\n    NgMeshViewerComponent.prototype.intersectingMesh = /**\r\n     * @param {?} mouse\r\n     * @return {?}\r\n     */\r\n    function (mouse) {\r\n        /** @type {?} */\r\n        var obj = [];\r\n        this.findAllObjects(obj, this.scene);\r\n        /** @type {?} */\r\n        var raycaster = new Raycaster();\r\n        raycaster.setFromCamera(mouse, this.camera);\r\n        /** @type {?} */\r\n        var intersects = raycaster.intersectObjects(obj);\r\n        if (intersects) {\r\n            /** @type {?} */\r\n            var a = intersects.filter(function (x) { return x.object.type == \"Mesh\"; })[0];\r\n            if (a)\r\n                return a.object;\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     * @param {?} event\r\n     * @return {?}\r\n     */\r\n    NgMeshViewerComponent.prototype.onMouseUp = /**\r\n     * @param {?} event\r\n     * @return {?}\r\n     */\r\n    function (event) {\r\n        // console.log(\"onMouseUp\");\r\n    };\r\n    /**\r\n     * @param {?} event\r\n     * @return {?}\r\n     */\r\n    NgMeshViewerComponent.prototype.onResize = /**\r\n     * @param {?} event\r\n     * @return {?}\r\n     */\r\n    function (event) {\r\n        this.canvasRef.nativeElement.style.width = \"100%\";\r\n        this.canvasRef.nativeElement.style.height = \"100%\";\r\n        console.log(\"onResize: \" + this.canvasRef.nativeElement.clientWidth + \", \" + this.canvasRef.nativeElement.clientHeight);\r\n        this.camera.aspect = this.getAspectRatio();\r\n        this.camera.updateProjectionMatrix();\r\n        this.renderer.setSize(this.canvasRef.nativeElement.clientWidth, this.canvasRef.nativeElement.clientHeight);\r\n        this.render();\r\n        return;\r\n    };\r\n    NgMeshViewerComponent.decorators = [\r\n        { type: Component, args: [{\r\n                    selector: 'ng-mesh-viewer',\r\n                    template: \"<canvas \\n    [ngClass] = \\\"canvasClass\\\"\\n    #canvas \\n    (mousemove)=\\\"onMouseMove($event)\\\"\\n    (mousedown)=\\\"onMouseDown($event)\\\"\\n    (mouseup)=\\\"onMouseUp($event)\\\">\\n</canvas>\",\r\n                    styles: [\"canvas{width:100%;height:100%}.button-row{position:absolute;z-index:100;float:right}.clickable{cursor:pointer}.default{cursor:default}\"],\r\n                    providers: [NgMeshViewerService]\r\n                },] },\r\n    ];\r\n    /** @nocollapse */\r\n    NgMeshViewerComponent.ctorParameters = function () { return [\r\n        { type: NgMeshViewerService }\r\n    ]; };\r\n    NgMeshViewerComponent.propDecorators = {\r\n        clickedRoom: [{ type: Output }],\r\n        clickedCanvas: [{ type: Output }],\r\n        data: [{ type: Input }],\r\n        showCentroids: [{ type: Input }],\r\n        showBoundingBox: [{ type: Input }],\r\n        canvasRef: [{ type: ViewChild, args: ['canvas',] }],\r\n        onResize: [{ type: HostListener, args: ['window:resize', ['$event'],] }]\r\n    };\r\n    return NgMeshViewerComponent;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\r\n */\r\nvar MeshViewerModule = /** @class */ (function () {\r\n    function MeshViewerModule() {\r\n    }\r\n    MeshViewerModule.decorators = [\r\n        { type: NgModule, args: [{\r\n                    imports: [\r\n                        CommonModule\r\n                    ],\r\n                    declarations: [NgMeshViewerComponent],\r\n                    exports: [NgMeshViewerComponent]\r\n                },] },\r\n    ];\r\n    return MeshViewerModule;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\r\n */\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\r\n */\n\nexport { NgMeshViewerService, NgMeshViewerComponent, MeshViewerModule };\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctbWVzaC12aWV3ZXIuanMubWFwIiwic291cmNlcyI6WyJuZzovL25nLW1lc2gtdmlld2VyL2xpYi9uZy1tZXNoLXZpZXdlci5zZXJ2aWNlLnRzIiwibmc6Ly9uZy1tZXNoLXZpZXdlci9saWIvbmctbWVzaC12aWV3ZXIuY29tcG9uZW50LnRzIiwibmc6Ly9uZy1tZXNoLXZpZXdlci9saWIvbmctbWVzaC12aWV3ZXIubW9kdWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcblxuZXhwb3J0IGludGVyZmFjZSBPQkpHZW9tZXRyeSB7XG4gICAgem9uZXM/OiBzdHJpbmdbXSxcbiAgICBlbGVtZW50cz86IHN0cmluZ1tdLFxuICAgIGdlb21ldHJ5UHJlcHJvY2Vzc2luZzogR2VvbVByZVByb2Nlc3Ncbn1cblxuZXhwb3J0IGludGVyZmFjZSBHZW9tUHJlUHJvY2VzcyB7XG4gICAgc2NhbGVGYWN0b3I6IG51bWJlcixcbiAgICBvZmZzZXQ6IG51bWJlcltdXG59XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIE5nTWVzaFZpZXdlclNlcnZpY2Uge1xuXG4gIGNvbnN0cnVjdG9yKCkgeyB9XG5cbiAgcHVibGljIGFzeW5jIHByb2Nlc3NPQkooZGF0YSk6IFByb21pc2U8T0JKR2VvbWV0cnk+IHtcbiAgIFxuICAgICAgLy8gRGVzaXJlZCBtYXggZGltZW5zaW9uIChtYXggd2lkdGgsIGhlaWdodCBvciBkZXB0aClcbiAgICAgIHZhciBtYXhEaW0gPSAxO1xuXG4gICAgICAvLyBHZXQgYm91bmRpbmcgYm94IG9mIGFsbCBnZW9tZXRyeSByZWNlaXZlZFxuICAgICAgdmFyIGJvdW5kaW5nQm94ID0gYXdhaXQgdGhpcy5nZXRCb3VuZGluZ0JveChkYXRhKTtcblxuICAgICAgdmFyIHNjYWxlRmFjdG9yID0gYXdhaXQgdGhpcy5jYWxjdWxhdGVTY2FsZUZhY3Rvcihib3VuZGluZ0JveCwgbWF4RGltKTtcblxuICAgICAgdmFyIG9mZnNldCA9IGF3YWl0IHRoaXMuY2FsY3VsYXRlT2Zmc2V0RmFjdG9ycyhib3VuZGluZ0JveCwgc2NhbGVGYWN0b3IsIG1heERpbSk7XG5cbiAgICAgIC8qKlxuICAgICAgICogU0NBTEUgQU5EIE9GRlNFVCBPUklHSU5BTFxuICAgICAgICovXG4gICAgICB2YXIgbmV3RGF0YTogc3RyaW5nW10gPSBkYXRhLm1hcChlbCA9PiB7XG5cbiAgICAgICAgICB2YXIgb2JqTGluZXMgPSBlbC5nZW9tZXRyeS5zcGxpdCgnXFxuJyk7XG5cbiAgICAgICAgICAvLyBMb29wIG92ZXIgbGluZXMgaW4gT0JKIGZpbGVcbiAgICAgICAgICB2YXIgb2JqTGluZXNOZXcgPSBvYmpMaW5lcy5tYXAobCA9PiB7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBTY2FsZSBhbmQgb2Zmc2V0IHZlcnRpY2VzXG4gICAgICAgICAgICAgIGlmKGwuc3RhcnRzV2l0aCgndiAnKSl7XG5cbiAgICAgICAgICAgICAgICAgIC8vIHNwbGl0IHN0cmluZyBbJ3YnLCAneENvb3JkaW5hdGUnLCAneUNvb3JkaW5hdGUnLCAnekNvb3JkaW5hdGUnXVxuICAgICAgICAgICAgICAgICAgdmFyIHYgPSBsLnNwbGl0KCcgJyk7XG5cbiAgICAgICAgICAgICAgICAgIC8vIE1vdmUgYW5kIHNjYWxlXG4gICAgICAgICAgICAgICAgICB2YXIgeCA9IHZbMV0qc2NhbGVGYWN0b3IgKyBvZmZzZXRbMF07XG4gICAgICAgICAgICAgICAgICB2YXIgeSA9IHZbMl0qc2NhbGVGYWN0b3IgKyBvZmZzZXRbMV07XG4gICAgICAgICAgICAgICAgICB2YXIgeiA9IHZbM10qc2NhbGVGYWN0b3IgKyBvZmZzZXRbMl07XG5cbiAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBuZXcgdmVydGljZSBpbiBPQkogc3ludGF4XG4gICAgICAgICAgICAgICAgICBsID0gYHYgJHt4fSAke3l9ICR7en1gO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmV0dXJuIGw7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB2YXIgZ2VvbWV0cnlOZXcgPSBvYmpMaW5lc05ldy5qb2luKCdcXG4nKTtcbiAgICAgICAgICBlbC5nZW9tZXRyeSA9IGdlb21ldHJ5TmV3O1xuXG4gICAgICAgICAgcmV0dXJuIGVsO1xuXG4gICAgICB9KTtcblxuICAgICAgLy8gQXBwZW5kIHByZS1wcm9jZXNzaW5nIGRhdGEgdG8gYXJyYXlcbiAgICAgIHZhciBnZW9tZXRyeVByZXByb2Nlc3NpbmcgPSB7XG4gICAgICAgICAgc2NhbGVGYWN0b3I6IHNjYWxlRmFjdG9yLFxuICAgICAgICAgIG9mZnNldDogb2Zmc2V0XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7em9uZXM6IG5ld0RhdGEsIGdlb21ldHJ5UHJlcHJvY2Vzc2luZzogZ2VvbWV0cnlQcmVwcm9jZXNzaW5nfTtcblxuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVTY2FsZUZhY3RvciA9IChib3VuZGluZ0JveCwgbWF4RGltKTogUHJvbWlzZTxudW1iZXI+ID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAvLyBHZXQgYm94IHNpemVcbiAgICAgICAgdmFyIHNpemUgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgICAgICBib3VuZGluZ0JveC5nZXRTaXplKHNpemUpO1xuXG4gICAgICAgIC8vIEdldCBsYXJnZXN0IGRpbWVuc2lvblxuICAgICAgICB2YXIgYXJyOiBudW1iZXJbXSA9IFtdXG4gICAgICAgIHNpemUudG9BcnJheShhcnIpO1xuICAgICAgICB2YXIgbGFyZ2VzdCA9IE1hdGgubWF4KC4uLmFycik7XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHNjYWxlLWZhY3RvclxuICAgICAgICB2YXIgc2NhbGVGYWN0b3IgPSBtYXhEaW0vbGFyZ2VzdDtcblxuICAgICAgICByZXNvbHZlKHNjYWxlRmFjdG9yKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlT2Zmc2V0RmFjdG9ycyA9IChib3VuZGluZ0JveCxzY2FsZUZhY3RvcixtYXhEaW0pOiBQcm9taXNlPG51bWJlcltdPiA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgLy8gR2V0IGNlbnRyb2lkXG4gICAgICAgIHZhciBjZW50cm9pZCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgICAgIGJvdW5kaW5nQm94LmdldENlbnRlcihjZW50cm9pZCk7XG5cbiAgICAgICAgLy8gU2NhbGUgY2VudHJvaWRcbiAgICAgICAgdmFyIGFycjogbnVtYmVyW10gPSBbXVxuICAgICAgICBjZW50cm9pZC50b0FycmF5KGFycik7XG4gICAgICAgIGFyciA9IGFyci5tYXAobiA9PiBuKnNjYWxlRmFjdG9yKTtcblxuICAgICAgICAvLyBDYWxjdWxhdGUgb2Zmc2V0XG4gICAgICAgIHZhciBvZmZzZXRYID0gbWF4RGltLzIgLSBhcnJbMF07XG4gICAgICAgIHZhciBvZmZzZXRZID0gbWF4RGltLzIgLSBhcnJbMV07XG4gICAgICAgIHZhciBvZmZzZXRaID0gbWF4RGltLzIgLSBhcnJbMl07XG5cbiAgICAgICAgcmVzb2x2ZShbb2Zmc2V0WCwgb2Zmc2V0WSwgb2Zmc2V0Wl0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRCb3VuZGluZ0JveCA9IChkYXRhKTogUHJvbWlzZTxUSFJFRS5Cb3gzPiA9PiB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXG4gICAgICAgIC8vIENyZWF0ZSBkZWZhdWx0IG1hdGVyaWFsIGZvciBwb2ludHNcbiAgICAgICAgdmFyIGNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKCBcIiMwMDAwMDBcIiApO1xuICAgICAgICB2YXIgbWF0ID0gbmV3IFRIUkVFLlBvaW50c01hdGVyaWFsKCB7IHNpemU6IDIsIGNvbG9yOiBjb2xvciB9ICk7XG5cbiAgICAgICAgLy8gSW5zdGFudGlhdGUgYm91bmRpbmcgYm94XG4gICAgICAgIHZhciBib3VuZGluZ0JveCA9IG5ldyBUSFJFRS5Cb3gzKCk7XG5cbiAgICAgICAgZGF0YS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGlmKGVsLmdlb21ldHJ5KSB7XG4gICAgICAgICAgICAgICAgdmFyIG9iakxpbmVzID0gZWwuZ2VvbWV0cnkuc3BsaXQoJ1xcbicpO1xuICAgICAgICAgICAgICAgIHZhciB2ZXJ0aWNlc0FyciA9IG9iakxpbmVzLmZpbHRlcihsID0+IGwuc3RhcnRzV2l0aCgndiAnKSk7XG4gICAgICAgICAgICAgICAgdmVydGljZXNBcnIuZm9yRWFjaCh2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3BsaXQgc3RyaW5nIFsndicsICd4Q29vcmRpbmF0ZScsICd5Q29vcmRpbmF0ZScsICd6Q29vcmRpbmF0ZSddXG4gICAgICAgICAgICAgICAgICAgIHYgPSB2LnNwbGl0KCcgJyk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIERlZmluZSB2ZXJ0aWNlXG4gICAgICAgICAgICAgICAgICAgIHZhciBhID0gbmV3IFRIUkVFLlZlY3RvcjMoIHZbMV0sIHZbMl0sIHZbM10gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHRvIGJvdW5kaW5nIGJveFxuICAgICAgICAgICAgICAgICAgICB2YXIgZ2VvID0gbmV3IFRIUkVFLkdlb21ldHJ5KCk7XG4gICAgICAgICAgICAgICAgICAgIGdlby52ZXJ0aWNlcy5wdXNoKGEpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgVEhSRUUuUG9pbnRzKCBnZW8sIG1hdCApO1xuICAgICAgICAgICAgICAgICAgICBib3VuZGluZ0JveC5leHBhbmRCeU9iamVjdChwb2ludCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJlc29sdmUoYm91bmRpbmdCb3gpO1xuXG4gICAgICB9KTtcbiAgfTtcblxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkNoYW5nZXMsIEFmdGVyVmlld0luaXQsIFNpbXBsZUNoYW5nZXMsIElucHV0LCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYsIEhvc3RMaXN0ZW5lciwgT3V0cHV0LCBFdmVudEVtaXR0ZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcbmltcG9ydCBPQkpMb2FkZXIgZnJvbSAndGhyZWUtb2JqLWxvYWRlcic7XG5PQkpMb2FkZXIoVEhSRUUpO1xuaW1wb3J0IHsgT3JiaXRDb250cm9scyB9IGZyb20gJ0BhdmF0c2Fldi90aHJlZS1vcmJpdGNvbnRyb2xzLXRzJztcbmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzLXNjYWxlLWNocm9tYXRpYyc7XG5cbmltcG9ydCB7IE5nTWVzaFZpZXdlclNlcnZpY2UgfSBmcm9tICcuL25nLW1lc2gtdmlld2VyLnNlcnZpY2UnO1xuXG5pbXBvcnQgeyBPQkpHZW9tZXRyeSB9IGZyb20gJy4vbmctbWVzaC12aWV3ZXIuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ25nLW1lc2gtdmlld2VyJyxcbiAgdGVtcGxhdGU6IGA8Y2FudmFzIFxyXG4gICAgW25nQ2xhc3NdID0gXCJjYW52YXNDbGFzc1wiXHJcbiAgICAjY2FudmFzIFxyXG4gICAgKG1vdXNlbW92ZSk9XCJvbk1vdXNlTW92ZSgkZXZlbnQpXCJcclxuICAgIChtb3VzZWRvd24pPVwib25Nb3VzZURvd24oJGV2ZW50KVwiXHJcbiAgICAobW91c2V1cCk9XCJvbk1vdXNlVXAoJGV2ZW50KVwiPlxyXG48L2NhbnZhcz5gLFxuICBzdHlsZXM6IFtgY2FudmFze3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCV9LmJ1dHRvbi1yb3d7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDoxMDA7ZmxvYXQ6cmlnaHR9LmNsaWNrYWJsZXtjdXJzb3I6cG9pbnRlcn0uZGVmYXVsdHtjdXJzb3I6ZGVmYXVsdH1gXSxcbiAgcHJvdmlkZXJzOiBbIE5nTWVzaFZpZXdlclNlcnZpY2UgXVxufSlcblxuZXhwb3J0IGNsYXNzIE5nTWVzaFZpZXdlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uQ2hhbmdlcywgQWZ0ZXJWaWV3SW5pdCB7XG5cbiAgQE91dHB1dCgpIGNsaWNrZWRSb29tID0gbmV3IEV2ZW50RW1pdHRlcigpOyAgICAgICAgICAgICAvLyBDbGlja2VkIHJvb21cbiAgQE91dHB1dCgpIGNsaWNrZWRDYW52YXMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgcHVibGljIHNwYWNlcztcbiAgQElucHV0KCkgcHVibGljIGRhdGE7ICAgICAgICAgICAvL0pTT04gKyBvYmpcbiAgQElucHV0KCkgcHVibGljIHNob3dDZW50cm9pZHM6IGJvb2xlYW4gPSB0cnVlO1xuICBASW5wdXQoKSBwdWJsaWMgc2hvd0JvdW5kaW5nQm94OiBib29sZWFuID0gdHJ1ZTtcblxuICAvLyBUSFJFRSBKU1xuICBwdWJsaWMgc2NlbmU6IFRIUkVFLlNjZW5lO1xuICBwdWJsaWMgY2FtZXJhOiBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYTtcbiAgcHVibGljIHJlbmRlcmVyOiBUSFJFRS5XZWJHTFJlbmRlcmVyO1xuICBwdWJsaWMgY29udHJvbHM7XG5cbiAgLy8gR0VPTUVUUllcbiAgcHVibGljIGJvdW5kaW5nQm94OiBUSFJFRS5Cb3gzOyAvLyBWb3VuZGluZyBib3ggb2YgZnVsbCBnZW9tZXRyeVxuICBwdWJsaWMgY2VudHJvaWQ6IFRIUkVFLlZlY3RvcjMgPSBuZXcgVEhSRUUuVmVjdG9yMygwLjUsMC41LDAuNSk7OyAvLyBDZW50cm9pZCBvZiBmdWxsIGdlb21ldHJ5XG4gIHB1YmxpYyBzaXplOiBUSFJFRS5WZWN0b3IzOyAgICAgLy8gU2l6ZSBvZiBmdWxsIGdlb21ldHJ5XG5cbiAgcHVibGljIGhpZ2hsaWdodE1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKCB7IGNvbG9yOiAweDdjMGEwMiwgb3BhY2l0eTogMSB9ICk7XG4gIHB1YmxpYyBob3Zlck1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKCB7IGNvbG9yOiAweDAwMDAwMCwgb3BhY2l0eTogMC4yIH0gKTtcblxuICAvLyBTRUxFQ1RJT05cbiAgcHVibGljIHNlbGVjdGVkOyAgICAgICAgICAgICAgICAvLyBTdG9yZXMgdGhlIHNlbGVjdGVkIG9iamVjdFxuICBwdWJsaWMgcHJldmlvdXNNYXRlcmlhbDsgICAgICAgIC8vIFN0b3JlcyB0aGUgY29sb3Igb2YgdGhlIG9iamVjdCB3aGljaCB3YXMgcHJldmlvdXNseSBzZWxlY3RlZC9ob3ZlcmVkXG4gIHB1YmxpYyBwcmV2aW91c0hvdmVyZWQ7ICAgICAgICAgLy8gU3RvcmVzIHRoZSBvYmplY3Qgd2hpY2ggd2FzIHByZXZpb3VzbHkgaG92ZXJlZFxuICBcbiAgcHVibGljIGNhbnZhc0NsYXNzOiBzdHJpbmcgPSAnZGVmYXVsdCc7XG5cbiAgQFZpZXdDaGlsZCgnY2FudmFzJylcbiAgcHJpdmF0ZSBjYW52YXNSZWY6IEVsZW1lbnRSZWY7XG5cbiAgY29uc3RydWN0b3IoIHByaXZhdGUgX3M6IE5nTWVzaFZpZXdlclNlcnZpY2UgKSB7XG4gICAgdGhpcy5yZW5kZXIgPSB0aGlzLnJlbmRlci5iaW5kKHRoaXMpO1xuICB9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuXG4gICAgaWYoQXJyYXkuaXNBcnJheShjaGFuZ2VzLmRhdGEuY3VycmVudFZhbHVlKSl7XG5cbiAgICAgIHRoaXMuY3JlYXRlU2NlbmUoKTtcblxuICAgICAgLy8gUGVyZm9ybSBnZW9tZXRyeSBwcmVwcm9jZXNzaW5nXG4gICAgICAvLyBTY2FsZXMgYW5kIG9mZnNldHMgZ2VvbWV0cnkgdG8gZml0IChbMCwwLDBdLCBbMSwxLDFdKSBzY2VuZVxuICAgICAgdmFyIHByb2Nlc3NlZCA9IHRoaXMuX3MucHJvY2Vzc09CSih0aGlzLmRhdGEpLnRoZW4ocmVzID0+IHtcbiAgICAgICAgdGhpcy5zcGFjZXMgPSByZXMuem9uZXM7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3BhY2VzKTtcbiAgICAgICAgdGhpcy5hcHBlbmRNZXNoZXModGhpcy5zcGFjZXMpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHRoaXMuY3JlYXRlUmVuZGVyZXIoKTtcbiAgICAgIHRoaXMuY3JlYXRlQ2FtZXJhKCk7XG4gICAgICB0aGlzLmNyZWF0ZUNvbnRyb2xzKCk7XG4gICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH1cblxuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIFxuICB9XG5cbiAgcHVibGljIHJlbmRlcigpIHtcbiAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLnNjZW5lLCB0aGlzLmNhbWVyYSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVNjZW5lKCk6IFRIUkVFLlNjZW5lIHtcbiAgICAgIHRoaXMuc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcblxuICAgICAgdmFyIGFtYmllbnQgPSBuZXcgVEhSRUUuQW1iaWVudExpZ2h0KCAweDEwMTAzMCApO1xuICAgICAgdGhpcy5zY2VuZS5hZGQoIGFtYmllbnQgKTtcblxuICAgICAgdmFyIGxpZ2h0ID0gbmV3IFRIUkVFLlBvaW50TGlnaHQoMHhmZmZmZmYsIDEsIDEwMDApO1xuICAgICAgbGlnaHQucG9zaXRpb24uc2V0KDAsIDAsIDEpO1xuICAgICAgdGhpcy5zY2VuZS5hZGQobGlnaHQpO1xuXG4gICAgICB2YXIgbGlnaHQgPSBuZXcgVEhSRUUuUG9pbnRMaWdodCgweGZmZmZmZiwgMSwgMTAwMCk7XG4gICAgICBsaWdodC5wb3NpdGlvbi5zZXQoMCwgMSwgMSk7XG4gICAgICB0aGlzLnNjZW5lLmFkZChsaWdodCk7XG5cbiAgICAgIHJldHVybiB0aGlzLnNjZW5lO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVSZW5kZXJlcigpOiBUSFJFRS5XZWJHTFJlbmRlcmVyIHtcbiAgICB2YXIgY2FudmFzID0gdGhpcy5jYW52YXNSZWYubmF0aXZlRWxlbWVudDtcbiAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoIHsgY2FudmFzOiBjYW52YXMsIGFudGlhbGlhczogdHJ1ZSwgYWxwaGE6IHRydWUgfSApO1xuICAgIHRoaXMucmVuZGVyZXIuc2V0Q2xlYXJDb2xvciggMHhmZmZmZmYsIDApO1xuICAgIHRoaXMucmVuZGVyZXIuc2V0U2l6ZSggd2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCApO1xuXG4gICAgcmV0dXJuIHRoaXMucmVuZGVyZXI7XG4gIH1cblxuICBwcml2YXRlIGFwcGVuZE1lc2hlcyhzcGFjZXMpOiB2b2lkIHtcblxuICAgIC8vIEFkZCBPQkogZ3JhcGhpY3NcbiAgICB2YXIgb2JqTG9hZGVyID0gbmV3IFRIUkVFLk9CSkxvYWRlcigpO1xuICAgIHZhciBjb2xvclNjaGVtZSA9IGQzLnNjaGVtZUNhdGVnb3J5MTA7XG5cbiAgICAvLyBDb252ZXJ0IHRvIGFycmF5IGlmIG9ubHkgc2luZ2xlIHNwYWNlIHJlY2VpdmVkXG4gICAgaWYoIUFycmF5LmlzQXJyYXkoc3BhY2VzKSkgc3BhY2VzID0gW3NwYWNlc107XG5cbiAgICBmb3IodmFyIHNwYWNlIG9mIHNwYWNlcyl7XG5cbiAgICAgIHZhciBteU9iaiA9IG9iakxvYWRlci5wYXJzZShzcGFjZS5nZW9tZXRyeSk7XG4gICAgICB2YXIgcmFuZEludCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgICAgIHZhciBjb2xvciA9IG5ldyBUSFJFRS5Db2xvcihjb2xvclNjaGVtZVtyYW5kSW50XSk7XG5cbiAgICAgIC8vIERlZmluZSBtYXRlcmlhbFxuICAgICAgdmFyIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKCB7IGNvbG9yOiBjb2xvciwgc2lkZTogVEhSRUUuRG91YmxlU2lkZSwgb3BhY2l0eTogMC41LCB0cmFuc3BhcmVudDogdHJ1ZSwgZGVwdGhXcml0ZTogZmFsc2UgfSApO1xuXG4gICAgICBteU9iai5uYW1lID0gc3BhY2UudXJpO1xuXG4gICAgICB2YXIgaW52YWxpZFBvcztcbiAgICAgIG15T2JqLnRyYXZlcnNlKGNoaWxkID0+IHtcbiAgICAgICAgaWYgKCBjaGlsZCBpbnN0YW5jZW9mIFRIUkVFLk1lc2ggKSB7XG4gICAgICAgICAgY2hpbGQubmFtZSA9IHNwYWNlLnVyaTtcbiAgICAgICAgICBjaGlsZC5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuXG4gICAgICAgICAgLy8gR2V0IHBvc2l0aW9uIGF0dHJpYnV0ZVxuICAgICAgICAgIHZhciB4OiBhbnkgPSBjaGlsZC5nZW9tZXRyeS5jbG9uZSgpO1xuICAgICAgICAgIGludmFsaWRQb3MgPSB4LmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXkuaW5jbHVkZXMoTmFOKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFkZCBpZiBub3QgcG9zaXRpb24gaW5jbHVkZXMgTmFOIHZhbHVlKHMpXG4gICAgICBpZighaW52YWxpZFBvcyl7XG4gICAgICAgIHRoaXMuc2NlbmUuYWRkKG15T2JqKTtcbiAgICAgIFxuICAgICAgICBpZih0aGlzLnNob3dDZW50cm9pZHMpe1xuICAgICAgICAgIC8vIEdldCBjZW50cm9pZCBvZiBzcGFjZVxuICAgICAgICAgIHZhciBiYm94ID0gbmV3IFRIUkVFLkJveDMoKS5zZXRGcm9tT2JqZWN0KG15T2JqKVxuXG4gICAgICAgICAgdmFyIGN0ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICAgICAgICBiYm94LmdldENlbnRlcihjdCk7XG5cbiAgICAgICAgICAvLyBBZGQgY2VudHJvaWRcbiAgICAgICAgICB2YXIgZ2VvID0gbmV3IFRIUkVFLkdlb21ldHJ5KCk7XG4gICAgICAgICAgZ2VvLnZlcnRpY2VzLnB1c2goY3QpO1xuICAgICAgICAgIHZhciBjb2xvciA9IG5ldyBUSFJFRS5Db2xvciggXCIjMDAwMDAwXCIgKTtcbiAgICAgICAgICB2YXIgbWF0ID0gbmV3IFRIUkVFLlBvaW50c01hdGVyaWFsKCB7IHNpemU6IDIsIHNpemVBdHRlbnVhdGlvbjogZmFsc2UsIGNvbG9yOiBjb2xvciB9ICk7XG4gICAgICAgICAgdmFyIGNlbnRyb2lkID0gbmV3IFRIUkVFLlBvaW50cyggZ2VvLCBtYXQgKTtcbiAgICAgICAgICB0aGlzLnNjZW5lLmFkZChjZW50cm9pZCk7XG4gICAgICAgIH1cbiAgICAgIH1lbHNle1xuICAgICAgICBjb25zb2xlLmxvZyhcIlNwYWNlIFwiICsgc3BhY2UudXJpICsgXCIgaGFzIGludmFsaWQgcG9zaXRpb24gYXR0cmlidXRlcy5cIilcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm47XG4gICAgXG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUNhbWVyYSgpOiBUSFJFRS5DYW1lcmEge1xuICAgIGxldCBhc3BlY3RSYXRpbyA9IHRoaXMuZ2V0QXNwZWN0UmF0aW8oKTtcbiAgICB2YXIgZm92ID0gNzU7ICAgLy8gdmVydGljYWwgZmllbGQgb2Ygdmlld1xuICAgIHZhciBuZWFyID0gMC4xOyAvLyBuZWFyIHBsYW5lXG4gICAgdmFyIGZhciA9IDEwMDA7ICAvLyBmYXIgcGxhbmVcblxuICAgIHRoaXMuY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKCBmb3YsIGFzcGVjdFJhdGlvLCBuZWFyLCBmYXIgKTtcbiAgICB0aGlzLmNhbWVyYS51cC5zZXQoMCwwLDEpOyAgICAvLyB6LWF4aXMgdXBcbiAgICB0aGlzLmNhbWVyYS5sb29rQXQoIHRoaXMuY2VudHJvaWQgKTtcbiAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi5zZXQoMS4xLCAwLjUsIDEuMSk7XG5cbiAgICAvLyBmb3YgPSAyICogTWF0aC5hdGFuKCBoZWlnaHQgLyAoIDIgKiBkaXN0ICkgKSAqICggMTgwIC8gTWF0aC5QSSApO1xuICAgIHRoaXMuY2FtZXJhLmZvdiA9IDIgKiBNYXRoLmF0YW4oIDEgLyAoIDIgKiAwLjI1ICkgKSAqICggMTgwIC8gTWF0aC5QSSApO1xuXG4gICAgcmV0dXJuIHRoaXMuY2FtZXJhO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVDb250cm9scygpOiBUSFJFRS5PcmJpdENvbnRyb2xzIHtcbiAgICB0aGlzLmNvbnRyb2xzID0gbmV3IE9yYml0Q29udHJvbHMoIHRoaXMuY2FtZXJhLCB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQgKTtcbiAgICB0aGlzLmNvbnRyb2xzLm1pblBvbGFyQW5nbGUgPSAwO1xuICAgIHRoaXMuY29udHJvbHMubWF4UG9sYXJBbmdsZSA9IE1hdGguUEk7XG4gICAgdGhpcy5jb250cm9scy5taW5EaXN0YW5jZSA9IDA7XG4gICAgdGhpcy5jb250cm9scy5tYXhEaXN0YW5jZSA9IDEwO1xuXG4gICAgLy8gc2V0IGNhbWVyYSB0byByb3RhdGUgYXJvdW5kIGNlbnRlciBvZiBsb2FkZWQgb2JqZWN0XG4gICAgdGhpcy5jb250cm9scy50YXJnZXQgPSB0aGlzLmNlbnRyb2lkO1xuXG4gICAgdGhpcy5jb250cm9scy5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLnJlbmRlcik7XG5cbiAgICByZXR1cm4gdGhpcy5jb250cm9scztcbiAgfVxuXG4gIHByaXZhdGUgZ2V0QXNwZWN0UmF0aW8oKTogbnVtYmVyIHtcbiAgICAgIHZhciBjYW52YXMgPSB0aGlzLmNhbnZhc1JlZi5uYXRpdmVFbGVtZW50O1xuICAgICAgbGV0IGhlaWdodCA9IGNhbnZhcy5jbGllbnRIZWlnaHQ7XG4gICAgICBpZiAoaGVpZ2h0ID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FudmFzLmNsaWVudFdpZHRoIC8gY2FudmFzLmNsaWVudEhlaWdodDtcbiAgfVxuXG4gIC8qIEVWRU5UUyAqL1xuICBwdWJsaWMgb25Nb3VzZURvd24oZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgLy8gVW5zZWxlY3QgcHJldmlvdXNseSBzZWxlY3RlZCBvYmplY3RcbiAgICBpZih0aGlzLnNlbGVjdGVkKXtcbiAgICAgIHRoaXMuc2VsZWN0ZWQubWF0ZXJpYWwgPSB0aGlzLnByZXZpb3VzTWF0ZXJpYWw7XG4gICAgICB0aGlzLnNlbGVjdGVkID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBEZWZpbmUgbW91c2UgY2xpY2sgYXMgKHgseSkgdmVjdG9yXG4gICAgdmFyIG1vdXNlID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcbiAgICBtb3VzZS54ID0gKGV2ZW50LmNsaWVudFggLyB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQuY2xpZW50V2lkdGgpICogMiAtIDE7XG4gICAgbW91c2UueSA9IC0gKGV2ZW50LmNsaWVudFkgLyB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQuY2xpZW50SGVpZ2h0KSAqIDIgKyAxO1xuXG4gICAgdmFyIG9iajogYW55ID0gdGhpcy5pbnRlcnNlY3RpbmdNZXNoKG1vdXNlKTtcbiAgICBcbiAgICAvLyBDaGFuZ2UgY29sb3JcbiAgICBpZihvYmope1xuICAgICAgLy8gU3RvcmVcbiAgICAgIHRoaXMuc2VsZWN0ZWQgPSBvYmo7XG4gICAgICB0aGlzLnByZXZpb3VzTWF0ZXJpYWwgPSBvYmoubWF0ZXJpYWw7XG5cbiAgICAgIC8vIFNldCBuZXcgbWF0ZXJpYWxcbiAgICAgIG9iai5tYXRlcmlhbCA9IHRoaXMuaGlnaGxpZ2h0TWF0ZXJpYWw7XG5cbiAgICAgIC8vIEVtaXQgb3V0cHV0XG4gICAgICB0aGlzLmNsaWNrZWRSb29tLmVtaXQoe3VyaTogb2JqLm5hbWV9KTtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgICByZXR1cm47XG5cbiAgfVxuXG4gIHB1YmxpYyBvbk1vdXNlTW92ZShldmVudDogTW91c2VFdmVudCk6IHZvaWR7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIGlmKCF0aGlzLnJlbmRlcmVyKSByZXR1cm47XG5cbiAgICAvLyBEZWZpbmUgbW91c2UgY2xpY2sgYXMgKHgseSkgdmVjdG9yXG4gICAgdmFyIG1vdXNlID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcbiAgICBtb3VzZS54ID0gKGV2ZW50LmNsaWVudFggLyB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQuY2xpZW50V2lkdGgpICogMiAtIDE7XG4gICAgbW91c2UueSA9IC0gKGV2ZW50LmNsaWVudFkgLyB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQuY2xpZW50SGVpZ2h0KSAqIDIgKyAxO1xuXG4gICAgdmFyIG9iajogYW55ID0gdGhpcy5pbnRlcnNlY3RpbmdNZXNoKG1vdXNlKTtcblxuICAgIGlmKG9iaikge1xuXG4gICAgICAvLyBTYXZlIG1hdGVyaWFsIGZvciBsYXRlciBpZiBob3ZlciBqdXN0IGluaXRpYXRlZFxuICAgICAgaWYob2JqICE9IHRoaXMucHJldmlvdXNIb3ZlcmVkKXtcbiAgICAgICAgdGhpcy5jYW52YXNDbGFzcyA9IFwiY2xpY2thYmxlXCJcblxuICAgICAgICAvLyAvLyBSZXN0b3JlIG1hdGVyaWFsIGZvciBwcmV2aW91c2x5IGhvdmVyZWRcbiAgICAgICAgLy8gaWYodGhpcy5wcmV2aW91c0hvdmVyZWQpe1xuICAgICAgICAvLyAgIHRoaXMucHJldmlvdXNIb3ZlcmVkLm1hdGVyaWFsID0gdGhpcy5wcmV2aW91c01hdGVyaWFsO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgLy8gU2V0IGN1cnJlbnQgb2JqZWN0IHRvIHByZXZpb3VzbHkgaG92ZXJlZFxuICAgICAgICB0aGlzLnByZXZpb3VzSG92ZXJlZCA9IG9iajtcbiAgICAgICAgLy8gdGhpcy5wcmV2aW91c01hdGVyaWFsID0gb2JqLm1hdGVyaWFsO1xuXG4gICAgICAgIC8vIC8vIFNldCBob3ZlciBtYXRlcmlhbCBvbiBvYmplY3QgKGlmIG5vdCBzZWxlY3RlZClcbiAgICAgICAgLy8gaWYob2JqICE9IHRoaXMuc2VsZWN0ZWQpe1xuICAgICAgICAvLyAgIG9iai5tYXRlcmlhbCA9IHRoaXMuaG92ZXJNYXRlcmlhbDtcbiAgICAgICAgLy8gfVxuICAgICAgICBcbiAgICAgIH1cbiAgICB9ZWxzZXtcbiAgICAgIGlmKHRoaXMucHJldmlvdXNIb3ZlcmVkKXtcbiAgICAgICAgdGhpcy5jYW52YXNDbGFzcyA9IFwiZGVmYXVsdFwiXG4gICAgICAgIC8vIGlmKHRoaXMucHJldmlvdXNIb3ZlcmVkICE9IHRoaXMuc2VsZWN0ZWQpe1xuICAgICAgICAvLyAgIC8vIFJlc3RvcmUgbWF0ZXJpYWwgZm9yIHByZXZpb3VzbHkgaG92ZXJlZCBhbmQgc2V0IHByZXZpb3VzbHkgaG92ZXJlZCB0byBudWxsXG4gICAgICAgIC8vICAgdGhpcy5wcmV2aW91c0hvdmVyZWQubWF0ZXJpYWwgPSB0aGlzLnByZXZpb3VzTWF0ZXJpYWw7XG4gICAgICAgIC8vIH1cbiAgICAgICAgdGhpcy5wcmV2aW91c0hvdmVyZWQgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcigpO1xuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcHJpdmF0ZSBmaW5kQWxsT2JqZWN0cyhwcmVkOiBUSFJFRS5PYmplY3QzRFtdLCBwYXJlbnQ6IFRIUkVFLk9iamVjdDNEKTogdm9pZCB7XG4gICAgICAvLyBOT1RFOiBCZXR0ZXIgdG8ga2VlcCBzZXBhcmF0ZSBhcnJheSBvZiBzZWxlY3RlZCBvYmplY3RzXG4gICAgICBpZiAocGFyZW50LmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4uZm9yRWFjaCgoaSkgPT4ge1xuICAgICAgICAgICAgICBwcmVkLnB1c2goaSk7XG4gICAgICAgICAgICAgIHRoaXMuZmluZEFsbE9iamVjdHMocHJlZCwgaSk7ICAgICAgICAgICAgICBcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgfVxuXG4gIHByaXZhdGUgaW50ZXJzZWN0aW5nTWVzaChtb3VzZSk6IFRIUkVFLk9iamVjdDNEIHtcblxuICAgIC8vIEdldCBhbGwgb2JqZWN0cyBpbiBzY2VuZVxuICAgIHZhciBvYmo6IFRIUkVFLk9iamVjdDNEW10gPSBbXTtcbiAgICB0aGlzLmZpbmRBbGxPYmplY3RzKG9iaiwgdGhpcy5zY2VuZSk7XG5cbiAgICAvLyBDcmVhdGUgcmF5Y2FzdGVyIGZyb20gY2FtZXJhIHRvd2FyZHMgbW91c2UgcG9zaXRpb25cbiAgICB2YXIgcmF5Y2FzdGVyID0gbmV3IFRIUkVFLlJheWNhc3RlcigpO1xuICAgIHJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKG1vdXNlLCB0aGlzLmNhbWVyYSk7XG5cbiAgICAvLyBGaW5kIGludGVyc2VjdGluZyBvYmplY3RzXG4gICAgdmFyIGludGVyc2VjdHMgPSByYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyhvYmopO1xuXG4gICAgaWYoaW50ZXJzZWN0cyl7XG4gICAgICAvLyBPbmx5IGludGVyZXN0ZWQgaW4gbWVzaGVzXG4gICAgICB2YXIgYSA9IGludGVyc2VjdHMuZmlsdGVyKHggPT4geC5vYmplY3QudHlwZSA9PSBcIk1lc2hcIilbMF07XG4gICAgICBpZihhKSByZXR1cm4gYS5vYmplY3Q7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBudWxsO1xuXG4gIH1cblxuICBwdWJsaWMgb25Nb3VzZVVwKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcIm9uTW91c2VVcFwiKTtcbiAgfVxuXG4gIEBIb3N0TGlzdGVuZXIoJ3dpbmRvdzpyZXNpemUnLCBbJyRldmVudCddKVxuICBwdWJsaWMgb25SZXNpemUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgICB0aGlzLmNhbnZhc1JlZi5uYXRpdmVFbGVtZW50LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG4gICAgICB0aGlzLmNhbnZhc1JlZi5uYXRpdmVFbGVtZW50LnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xuICAgICAgY29uc29sZS5sb2coXCJvblJlc2l6ZTogXCIgKyB0aGlzLmNhbnZhc1JlZi5uYXRpdmVFbGVtZW50LmNsaWVudFdpZHRoICsgXCIsIFwiICsgdGhpcy5jYW52YXNSZWYubmF0aXZlRWxlbWVudC5jbGllbnRIZWlnaHQpO1xuXG4gICAgICB0aGlzLmNhbWVyYS5hc3BlY3QgPSB0aGlzLmdldEFzcGVjdFJhdGlvKCk7XG4gICAgICB0aGlzLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFNpemUodGhpcy5jYW52YXNSZWYubmF0aXZlRWxlbWVudC5jbGllbnRXaWR0aCwgdGhpcy5jYW52YXNSZWYubmF0aXZlRWxlbWVudC5jbGllbnRIZWlnaHQpO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIHJldHVybjtcbiAgfVxuXG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IE5nTWVzaFZpZXdlckNvbXBvbmVudCB9IGZyb20gJy4vbmctbWVzaC12aWV3ZXIuY29tcG9uZW50JztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZVxuICBdLFxuICBkZWNsYXJhdGlvbnM6IFtOZ01lc2hWaWV3ZXJDb21wb25lbnRdLFxuICBleHBvcnRzOiBbTmdNZXNoVmlld2VyQ29tcG9uZW50XVxufSlcbmV4cG9ydCBjbGFzcyBNZXNoVmlld2VyTW9kdWxlIHsgfVxuIl0sIm5hbWVzIjpbIlRIUkVFLlZlY3RvcjMiLCJUSFJFRS5Db2xvciIsIlRIUkVFLlBvaW50c01hdGVyaWFsIiwiVEhSRUUuQm94MyIsIlRIUkVFLkdlb21ldHJ5IiwiVEhSRUUuUG9pbnRzIiwiT0JKTG9hZGVyIiwiVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwiLCJUSFJFRS5TY2VuZSIsIlRIUkVFLkFtYmllbnRMaWdodCIsIlRIUkVFLlBvaW50TGlnaHQiLCJUSFJFRS5XZWJHTFJlbmRlcmVyIiwiVEhSRUUuT0JKTG9hZGVyIiwiZDMuc2NoZW1lQ2F0ZWdvcnkxMCIsInRzbGliXzEuX192YWx1ZXMiLCJUSFJFRS5Eb3VibGVTaWRlIiwiVEhSRUUuTWVzaCIsIlRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhIiwiVEhSRUUuVmVjdG9yMiIsIlRIUkVFLlJheWNhc3RlciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7SUFtQkU7b0NBMkQrQixVQUFDLFdBQVcsRUFBRSxNQUFNO1lBQ2pELE9BQU8sSUFBSSxPQUFPLENBQUMsVUFBQyxPQUFPLEVBQUUsTUFBTTs7Z0JBRS9CLElBQUksSUFBSSxHQUFHLElBQUlBLE9BQWEsRUFBRSxDQUFDO2dCQUMvQixXQUFXLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDOztnQkFHMUIsSUFBSSxHQUFHLEdBQWEsRUFBRSxDQUFBO2dCQUN0QixJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDOztnQkFDbEIsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsT0FBUixJQUFJLFdBQVEsR0FBRyxHQUFFOztnQkFHL0IsSUFBSSxXQUFXLEdBQUcsTUFBTSxHQUFDLE9BQU8sQ0FBQztnQkFFakMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO2FBQ3hCLENBQUMsQ0FBQztTQUNKO3NDQUVnQyxVQUFDLFdBQVcsRUFBQyxXQUFXLEVBQUMsTUFBTTtZQUM5RCxPQUFPLElBQUksT0FBTyxDQUFDLFVBQUMsT0FBTyxFQUFFLE1BQU07O2dCQUUvQixJQUFJLFFBQVEsR0FBRyxJQUFJQSxPQUFhLEVBQUUsQ0FBQztnQkFDbkMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQzs7Z0JBR2hDLElBQUksR0FBRyxHQUFhLEVBQUUsQ0FBQTtnQkFDdEIsUUFBUSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztn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","import { Component, Input, Output, EventEmitter, ViewChild, Directive, HostListener, NgModule } from '@angular/core';\nimport { MatIconRegistry } from '@angular/material/icon';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { decompose } from 'd3-decompose';\nimport { polygonCentroid } from 'd3-polygon';\nimport { CommonModule } from '@angular/common';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { MatIconModule, MatTooltipModule } from '@angular/material';\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar PlanComponent = /** @class */ (function () {\r\n    function PlanComponent(matIconRegistry, domSanitizer) {\r\n        this.matIconRegistry = matIconRegistry;\r\n        this.domSanitizer = domSanitizer;\r\n        this.clickedRoom = new EventEmitter();\r\n        this.clickedCanvas = new EventEmitter();\r\n        // Styles\r\n        this.selectedColor = '#ebefe4';\r\n        this.defaultColor = '#f2flec';\r\n        this.baseScale = 0.9;\r\n        this.baseOffsetX = 0;\r\n        this.baseOffsetY = 0;\r\n        this.transform = \"translate(\" + this.baseOffsetX + \",\" + this.baseOffsetY + \") scale(\" + this.baseScale + \",\" + this.baseScale + \")\";\r\n        this.movedX = 0;\r\n        this.movedY = 0;\r\n        this.scaled = 1;\r\n        this.panMode = false;\r\n        this.addNodeMode = false;\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    PlanComponent.prototype.ngAfterViewInit = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this.getCanvasSize();\r\n        // this.addSVGicons();\r\n    };\r\n    /**\r\n     * @param {?} changes\r\n     * @return {?}\r\n     */\r\n    PlanComponent.prototype.ngOnChanges = /**\r\n     * @param {?} changes\r\n     * @return {?}\r\n     */\r\n    function (changes) {\r\n        if (changes[\"data\"] && changes[\"data\"].currentValue) {\r\n            this.data = changes[\"data\"].currentValue;\r\n            this.extractRooms();\r\n            this.getScaleOffset();\r\n            this.zoomExtents();\r\n        }\r\n        if (changes[\"colors\"] && changes[\"colors\"].currentValue) {\r\n            this.defineColors();\r\n        }\r\n        if (changes[\"selected\"]) {\r\n            this.updateSelection();\r\n        }\r\n    };\r\n    // addSVGicons(){\r\n    //   this.matIconRegistry.addSvgIcon(\r\n    //     \"zoom_extents\",\r\n    //     this.domSanitizer.bypassSecurityTrustResourceUrl(\"../assets/zoom_extents.svg\")\r\n    //   );\r\n    // }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    PlanComponent.prototype.updateSelection = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var _this = this;\r\n        if (!this.rooms)\r\n            return;\r\n        this.rooms = this.rooms.map(function (x) {\r\n            if (_this.selected.indexOf(x.uri) != -1) {\r\n                x.selected = true;\r\n            }\r\n            else {\r\n                x.selected = false;\r\n            }\r\n            return x;\r\n        });\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    PlanComponent.prototype.defineColors = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var _this = this;\r\n        this.rooms.map(function (x) {\r\n            var /** @type {?} */ match = _this.colors.filter(function (y) { return y.uri == x.uri; });\r\n            if (match.length > 0) {\r\n                x.color = match[0].color;\r\n                x.description = match[0].value;\r\n            }\r\n            return x;\r\n        });\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    PlanComponent.prototype.getCanvasSize = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var /** @type {?} */ element = this.planContainer.nativeElement;\r\n        var /** @type {?} */ size = element.getBoundingClientRect();\r\n        this.canvasWidth = size.width;\r\n        this.canvasHeight = size.height;\r\n        this.canvasCentroid = [this.canvasWidth / 2, this.canvasHeight / 2];\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    PlanComponent.prototype.extractRooms = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var _this = this;\r\n        if (!this.data.features)\r\n            return this.rooms = null;\r\n        // For bounding box [xMin, yMin, xMax, yMax]\r\n        var /** @type {?} */ xMin;\r\n        var /** @type {?} */ yMin;\r\n        var /** @type {?} */ xMax;\r\n        var /** @type {?} */ yMax;\r\n        this.rooms = this.data.features.map(function (room) {\r\n            var /** @type {?} */ polygons = [];\r\n            var /** @type {?} */ roomPath = '';\r\n            var /** @type {?} */ centroid;\r\n            if (room.geometry && room.geometry.type == \"Polygon\") {\r\n                var /** @type {?} */ roomPolygons = []; // Allow multi polygons if doughnut room\r\n                room.geometry.coordinates.forEach(function (polygon) {\r\n                    var /** @type {?} */ points = '';\r\n                    var /** @type {?} */ path = '';\r\n                    // Reflect y coordinates to fit browser coordinate system and extract to polygon\r\n                    polygon.map(function (coordinate, index) {\r\n                        var /** @type {?} */ x = coordinate[0];\r\n                        var /** @type {?} */ y = -coordinate[1]; // reflect since SVG uses reflected coordinate system\r\n                        points += x + \",\" + y + \" \";\r\n                        path += (index == 0) ? \"M\" + x + \",\" + y + \" \" : \"L\" + x + \",\" + y + \" \";\r\n                        coordinate[1] = y; // Update polygon with new y\r\n                        // Get bounding box\r\n                        if (!xMin || x < xMin)\r\n                            xMin = x;\r\n                        if (!xMax || x > xMax)\r\n                            xMax = x;\r\n                        if (!yMin || y < yMin)\r\n                            yMin = y;\r\n                        if (!yMax || y > yMax)\r\n                            yMax = y;\r\n                        return coordinate;\r\n                    });\r\n                    points = points.trim(); // remove last space\r\n                    path = path.trim(); // remove last space\r\n                    // Get polygon centroid from first polygon\r\n                    if (roomPolygons.length < 1) {\r\n                        centroid = polygonCentroid(polygon);\r\n                    }\r\n                    roomPolygons.push(points);\r\n                    roomPath += path;\r\n                });\r\n                polygons.push(roomPolygons);\r\n            }\r\n            var /** @type {?} */ name = room.properties.name;\r\n            var /** @type {?} */ uri = room.properties.uri;\r\n            var /** @type {?} */ color = room.properties.color ? room.properties.color : _this.defaultColor;\r\n            var /** @type {?} */ description = room.properties.description ? room.properties.description : '';\r\n            // Store bounding box\r\n            // Store bounding box\r\n            _this.boundingBox = [xMin, yMin, xMax, yMax];\r\n            return { name: name, uri: uri, description: description, color: color, polygons: polygons, path: roomPath, centroid: centroid };\r\n        });\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    PlanComponent.prototype.getScaleOffset = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        // Calculate data size\r\n        var /** @type {?} */ bb = this.boundingBox;\r\n        var /** @type {?} */ dataWidth = bb[2] - bb[0];\r\n        var /** @type {?} */ dataHeight = bb[3] - bb[1];\r\n        // Calculate scale factors\r\n        var /** @type {?} */ scaleWidth = this.canvasWidth / dataWidth;\r\n        var /** @type {?} */ scaleHeight = this.canvasHeight / dataHeight;\r\n        var /** @type {?} */ scale = Math.min(scaleHeight, scaleWidth);\r\n        var /** @type {?} */ scaledDataCentroid = [scale * (bb[0] + dataWidth / 2), scale * (bb[1] + dataHeight / 2)];\r\n        // Calculate offset factors\r\n        var /** @type {?} */ offsetX = this.canvasCentroid[0] - scaledDataCentroid[0];\r\n        var /** @type {?} */ offsetY = this.canvasCentroid[1] - scaledDataCentroid[1];\r\n        // Set global variables\r\n        this.baseOffsetX = offsetX;\r\n        this.baseOffsetY = offsetY;\r\n        this.baseScale = scale;\r\n        return [scale, offsetX, offsetY];\r\n    };\r\n    /**\r\n     * @param {?} displacement\r\n     * @return {?}\r\n     */\r\n    PlanComponent.prototype.move = /**\r\n     * @param {?} displacement\r\n     * @return {?}\r\n     */\r\n    function (displacement) {\r\n        if (displacement) {\r\n            this.zoomHandler(undefined, displacement);\r\n        }\r\n    };\r\n    /**\r\n     * @param {?} displacement\r\n     * @return {?}\r\n     */\r\n    PlanComponent.prototype.moveEnd = /**\r\n     * @param {?} displacement\r\n     * @return {?}\r\n     */\r\n    function (displacement) {\r\n        // Update moved coordinates\r\n        this.movedX = this.movedX + displacement[0];\r\n        this.movedY = this.movedY + displacement[1];\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    PlanComponent.prototype.onWindowResize = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this.getCanvasSize();\r\n        this.getScaleOffset();\r\n        this.zoomExtents();\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    PlanComponent.prototype.zoomExtents = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this.scaled = this.baseScale * 0.95;\r\n        this.movedX = 0;\r\n        this.movedY = 0;\r\n        this.zoomHandler();\r\n    };\r\n    /**\r\n     * @param {?} ev\r\n     * @return {?}\r\n     */\r\n    PlanComponent.prototype.zoomOut = /**\r\n     * @param {?} ev\r\n     * @return {?}\r\n     */\r\n    function (ev) {\r\n        // Calculate current scale\r\n        var /** @type {?} */ scaleFactor = this.baseScale / 5;\r\n        this.scaled = this.scaled - scaleFactor;\r\n        this.zoomHandler(ev);\r\n    };\r\n    /**\r\n     * @param {?} ev\r\n     * @return {?}\r\n     */\r\n    PlanComponent.prototype.zoomIn = /**\r\n     * @param {?} ev\r\n     * @return {?}\r\n     */\r\n    function (ev) {\r\n        var /** @type {?} */ scaleFactor = this.baseScale / 5;\r\n        this.scaled = this.scaled + scaleFactor;\r\n        this.zoomHandler(ev);\r\n    };\r\n    /**\r\n     * @param {?=} ev\r\n     * @param {?=} displacement\r\n     * @return {?}\r\n     */\r\n    PlanComponent.prototype.zoomHandler = /**\r\n     * @param {?=} ev\r\n     * @param {?=} displacement\r\n     * @return {?}\r\n     */\r\n    function (ev, displacement) {\r\n        var /** @type {?} */ trns1 = '';\r\n        if (displacement) {\r\n            var /** @type {?} */ dx = this.baseOffsetX + this.movedX + displacement[0];\r\n            var /** @type {?} */ dy = this.baseOffsetY + this.movedY + displacement[1];\r\n        }\r\n        else {\r\n            dx = this.baseOffsetX + this.movedX;\r\n            dy = this.baseOffsetY + this.movedY;\r\n        }\r\n        // This should be adjusted to center at mouse position while zooming\r\n        // if(ev && ev.offsetX){\r\n        //     // Get mouse position relative to canvas center point and move\r\n        //     var mx = ev.offsetX-this.canvasCentroid[0];\r\n        //     var my = ev.offsetY-this.canvasCentroid[1];\r\n        //     var dx2 = mx;\r\n        //     var dy2 = my;\r\n        //     trns1 = `translate(${dx2},${dy2})`;\r\n        //     console.log(trns1)\r\n        // }\r\n        var /** @type {?} */ oldScale = decompose(this.transform).scale;\r\n        var /** @type {?} */ oldTrns = decompose(this.transform).translate;\r\n        var /** @type {?} */ scale = \"scale(\" + this.scaled + \",\" + this.scaled + \")\";\r\n        var /** @type {?} */ trns = \"translate(\" + dx + \",\" + dy + \")\";\r\n        // Update transform attribute\r\n        this.transform = trns + trns1 + scale;\r\n        // this.transform = this.transform.replace(oldScale,scale);\r\n    };\r\n    /**\r\n     * @param {?} ev\r\n     * @param {?} room\r\n     * @return {?}\r\n     */\r\n    PlanComponent.prototype.selectRoom = /**\r\n     * @param {?} ev\r\n     * @param {?} room\r\n     * @return {?}\r\n     */\r\n    function (ev, room) {\r\n        // Get coordinates\r\n        var /** @type {?} */ scale = this.scaled;\r\n        var /** @type {?} */ offsetX = this.baseOffsetX + this.movedX;\r\n        var /** @type {?} */ offsetY = this.baseOffsetY + this.movedY;\r\n        var /** @type {?} */ screenX = ev.offsetX;\r\n        var /** @type {?} */ screenY = ev.offsetX;\r\n        var /** @type {?} */ x = (screenX - offsetX) / scale;\r\n        var /** @type {?} */ y = (screenY - offsetY) / scale;\r\n        var /** @type {?} */ coordinates = [x, -y];\r\n        // Emit event\r\n        this.clickedRoom.emit({ uri: room.uri, coordinates: coordinates });\r\n    };\r\n    /**\r\n     * @param {?} ev\r\n     * @return {?}\r\n     */\r\n    PlanComponent.prototype.onCanvasClick = /**\r\n     * @param {?} ev\r\n     * @return {?}\r\n     */\r\n    function (ev) {\r\n        if (ev.target.id != 'canvas')\r\n            return;\r\n        this.clickedCanvas.emit();\r\n    };\r\n    PlanComponent.decorators = [\r\n        { type: Component, args: [{\r\n                    selector: 'ng-plan',\r\n                    template: \"<!-- Toolbar -->\\n<div class=\\\"toolbar\\\" *ngIf=\\\"toolbar\\\">\\n    <div class=\\\"icon-div\\\" (click)=\\\"zoomIn(null)\\\" matTooltip=\\\"Zoom in\\\">\\n        <mat-icon>zoom_in</mat-icon>\\n    </div>\\n    <div class=\\\"icon-div\\\" (click)=\\\"zoomOut(null)\\\" matTooltip=\\\"Zoom out\\\">\\n        <mat-icon>zoom_out</mat-icon>\\n    </div>\\n    <div class=\\\"icon-div\\\" (click)=\\\"zoomExtents()\\\" matTooltip=\\\"Zoom extents\\\">\\n        <mat-icon svgIcon=\\\"zoom_extents\\\"></mat-icon>\\n    </div>\\n</div>\\n\\n<div class=\\\"footer\\\">\\n    <p>Press and hold \\\"Alt\\\" to pan</p>\\n</div>\\n\\n<svg canvasEvents\\n    [style.cursor]=\\\"panMode ? 'move' : 'default'\\\"\\n    #canvas\\n    class=canvas\\n    (click)=\\\"onCanvasClick($event)\\\"\\n    (zoomOut)=\\\"zoomOut($event)\\\"\\n    (zoomIn)=\\\"zoomIn($event)\\\"\\n    (panMode)=\\\"panMode = $event\\\"\\n    (move)=\\\"move($event)\\\"\\n    (moveEnd)=\\\"moveEnd($event)\\\"\\n    (window:resize)=\\\"onWindowResize()\\\"\\n    (addNodeMode)=\\\"addNodeMode = $event\\\"\\n    id=\\\"canvas\\\">\\n\\n    <!--Draw rooms-->\\n    <g *ngFor=\\\"let room of rooms\\\"\\n        [attr.transform]=\\\"transform\\\"\\n        [id]=\\\"room.uri\\\"\\n        (click)=\\\"selectRoom($event, room)\\\"\\n        [attr.fill]=\\\"room.selected ? selectedColor : room.color\\\"\\n        class=\\\"room\\\">\\n\\n        <!-- Draw polygons -->\\n        <!-- <polygon *ngFor=\\\"let polygon of room.polygons\\\" \\n            [attr.points]=\\\"polygon\\\" \\n            class=\\\"polygon\\\">\\n        </polygon> -->\\n\\n        <!-- Draw paths -->\\n        <path\\n            [class.selected-space]=\\\"room.selected\\\"\\n            [attr.d]=\\\"room.path\\\"\\n            class=\\\"polygon\\\">\\n        </path> \\n\\n        <!-- Draw centroids -->\\n        <circle \\n            *ngIf=\\\"centroids\\\" \\n            [attr.cx]=\\\"room.centroid[0]\\\" \\n            fill=\\\"black\\\" \\n            [attr.cy]=\\\"room.centroid[1]\\\" \\n            [attr.r]=\\\"scaled*500\\\">\\n        </circle>\\n\\n        <!-- Add labels -->\\n        <text \\n            [style.font-size.em]=\\\"'12'\\\"\\n            style = \\\"font-family:roboto; fill: black;\\\"\\n            text-anchor=\\\"middle\\\" \\n            alignment-baseline=\\\"central\\\"\\n            [attr.x]=\\\"room.centroid[0]\\\"\\n            [attr.dy]=\\\"room.description ? -150 : 0\\\"\\n            [attr.y]=\\\"room.centroid[1]\\\">\\n            {{room.name}}\\n        </text>\\n\\n        <!-- Add description -->\\n        <text \\n            *ngIf = \\\"room.description\\\"\\n            [style.font-size.em]=\\\"'10'\\\"\\n            style = \\\"font-family:roboto; fill: black;\\\"\\n            text-anchor=\\\"middle\\\" \\n            alignment-baseline=\\\"central\\\"\\n            [attr.x]=\\\"room.centroid[0]\\\"\\n            [attr.y]=\\\"room.centroid[1]\\\"\\n            dy=\\\"150\\\">\\n            {{room.description}}\\n        </text>\\n    </g>\\n\\n</svg>\",\r\n                    styles: [\".canvas{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%;height:100%;position:fixed;top:0;left:0;bottom:0;right:0;z-index:-1}.polygon{stroke:#000;stroke-width:1;vector-effect:non-scaling-stroke;fill-rule:evenodd}.room:hover{opacity:.5;cursor:pointer}.selected-space{stroke-width:2}.toolbar{position:absolute;color:red;right:20px;width:100%}.icon-div>.mat-icon{float:right;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:rgba(220,220,220,.3);border-width:1px;border-radius:5px;margin-left:5px;padding:5px;z-index:1}.mat-icon{color:rgba(0,0,0,.6);font-size:30px;height:30px;width:30px;z-index:10}.mat-icon:hover{cursor:pointer;color:rgba(0,0,0,1)}.footer{background-color:rgba(220,220,220,.3);position:absolute;font-family:consolas;font-size:12px;padding:0 10px;border-radius:5px;bottom:10px}\"]\r\n                },] },\r\n    ];\r\n    /** @nocollapse */\r\n    PlanComponent.ctorParameters = function () { return [\r\n        { type: MatIconRegistry, },\r\n        { type: DomSanitizer, },\r\n    ]; };\r\n    PlanComponent.propDecorators = {\r\n        \"clickedRoom\": [{ type: Output },],\r\n        \"clickedCanvas\": [{ type: Output },],\r\n        \"data\": [{ type: Input },],\r\n        \"colors\": [{ type: Input },],\r\n        \"centroids\": [{ type: Input },],\r\n        \"toolbar\": [{ type: Input },],\r\n        \"selected\": [{ type: Input },],\r\n        \"selectedColor\": [{ type: Input },],\r\n        \"defaultColor\": [{ type: Input },],\r\n        \"planContainer\": [{ type: ViewChild, args: ['canvas',] },],\r\n    };\r\n    return PlanComponent;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar CanvasEventsDirective = /** @class */ (function () {\r\n    function CanvasEventsDirective() {\r\n        this.zoomOut = new EventEmitter();\r\n        this.zoomIn = new EventEmitter();\r\n        this.moveInit = new EventEmitter();\r\n        this.move = new EventEmitter();\r\n        this.moveEnd = new EventEmitter();\r\n        this.panMode = new EventEmitter();\r\n        this.addNodeMode = new EventEmitter();\r\n        this.mouseDown = false;\r\n        this.dragMode = false;\r\n    }\r\n    /**\r\n     * @param {?} event\r\n     * @return {?}\r\n     */\r\n    CanvasEventsDirective.prototype.onMouseWheelChrome = /**\r\n     * @param {?} event\r\n     * @return {?}\r\n     */\r\n    function (event) {\r\n        this.mouseWheelFunc(event);\r\n    };\r\n    /**\r\n     * @param {?} event\r\n     * @return {?}\r\n     */\r\n    CanvasEventsDirective.prototype.onMouseWheelFirefox = /**\r\n     * @param {?} event\r\n     * @return {?}\r\n     */\r\n    function (event) {\r\n        this.mouseWheelFunc(event);\r\n    };\r\n    /**\r\n     * @param {?} event\r\n     * @return {?}\r\n     */\r\n    CanvasEventsDirective.prototype.onMouseWheelIE = /**\r\n     * @param {?} event\r\n     * @return {?}\r\n     */\r\n    function (event) {\r\n        this.mouseWheelFunc(event);\r\n    };\r\n    /**\r\n     * @param {?} ev\r\n     * @return {?}\r\n     */\r\n    CanvasEventsDirective.prototype.onKeyDown = /**\r\n     * @param {?} ev\r\n     * @return {?}\r\n     */\r\n    function (ev) {\r\n        if (ev.key == \"ArrowDown\") {\r\n            this.zoomIn.emit(ev);\r\n        }\r\n        if (ev.key == \"ArrowUp\") {\r\n            this.zoomOut.emit(ev);\r\n        }\r\n        if (ev.key == \"Alt\") {\r\n            // enable drag mode if holding Alt\r\n            this.dragMode = true;\r\n            this.panMode.emit(true);\r\n        }\r\n        if (ev.key == \"Control\") {\r\n            this.addNodeMode.emit(true);\r\n        }\r\n    };\r\n    /**\r\n     * @param {?} ev\r\n     * @return {?}\r\n     */\r\n    CanvasEventsDirective.prototype.onKeyUp = /**\r\n     * @param {?} ev\r\n     * @return {?}\r\n     */\r\n    function (ev) {\r\n        if (ev.key == \"Alt\") {\r\n            // disable drag mode if releasing Alt\r\n            this.dragMode = false;\r\n            this.panMode.emit(false);\r\n        }\r\n        if (ev.key == \"Control\") {\r\n            this.addNodeMode.emit(false);\r\n        }\r\n    };\r\n    /**\r\n     * @param {?} ev\r\n     * @return {?}\r\n     */\r\n    CanvasEventsDirective.prototype.onMouseClick = /**\r\n     * @param {?} ev\r\n     * @return {?}\r\n     */\r\n    function (ev) {\r\n        this.mouseDown = true;\r\n        // enable drag mode if clicking middle button\r\n        if (ev.button == 1)\r\n            this.dragMode = true;\r\n        if (this.dragMode) {\r\n            this.clickX = ev.offsetX;\r\n            this.clickY = ev.offsetY;\r\n            this.panMode.emit(true);\r\n            this.moveInit.emit([ev.offsetX, ev.offsetY]);\r\n        }\r\n    };\r\n    /**\r\n     * @param {?} ev\r\n     * @return {?}\r\n     */\r\n    CanvasEventsDirective.prototype.onMouseMove = /**\r\n     * @param {?} ev\r\n     * @return {?}\r\n     */\r\n    function (ev) {\r\n        if (this.dragMode && this.mouseDown) {\r\n            this.move.emit([ev.offsetX - this.clickX, ev.offsetY - this.clickY]);\r\n        }\r\n    };\r\n    /**\r\n     * @param {?} ev\r\n     * @return {?}\r\n     */\r\n    CanvasEventsDirective.prototype.onMouseUp = /**\r\n     * @param {?} ev\r\n     * @return {?}\r\n     */\r\n    function (ev) {\r\n        this.mouseDown = false;\r\n        if (this.dragMode) {\r\n            this.dragMode = false;\r\n            this.panMode.emit(false);\r\n            this.moveEnd.emit([ev.offsetX - this.clickX, ev.offsetY - this.clickY]);\r\n        }\r\n    };\r\n    /**\r\n     * @param {?} event\r\n     * @return {?}\r\n     */\r\n    CanvasEventsDirective.prototype.mouseWheelFunc = /**\r\n     * @param {?} event\r\n     * @return {?}\r\n     */\r\n    function (event) {\r\n        var /** @type {?} */ event = window.event || event; // old IE support\r\n        var /** @type {?} */ delta = Math.max(-1, Math.min(1, (event.wheelDelta || -event.detail)));\r\n        if (delta > 0) {\r\n            this.zoomIn.emit(event);\r\n        }\r\n        else if (delta < 0) {\r\n            this.zoomOut.emit(event);\r\n        }\r\n        // for IE\r\n        event.returnValue = false;\r\n        // for Chrome and Firefox\r\n        if (event.preventDefault) {\r\n            event.preventDefault();\r\n        }\r\n    };\r\n    CanvasEventsDirective.decorators = [\r\n        { type: Directive, args: [{ selector: '[canvasEvents]' },] },\r\n    ];\r\n    /** @nocollapse */\r\n    CanvasEventsDirective.propDecorators = {\r\n        \"zoomOut\": [{ type: Output },],\r\n        \"zoomIn\": [{ type: Output },],\r\n        \"moveInit\": [{ type: Output },],\r\n        \"move\": [{ type: Output },],\r\n        \"moveEnd\": [{ type: Output },],\r\n        \"panMode\": [{ type: Output },],\r\n        \"addNodeMode\": [{ type: Output },],\r\n        \"onMouseWheelChrome\": [{ type: HostListener, args: ['mousewheel', ['$event'],] },],\r\n        \"onMouseWheelFirefox\": [{ type: HostListener, args: ['DOMMouseScroll', ['$event'],] },],\r\n        \"onMouseWheelIE\": [{ type: HostListener, args: ['onmousewheel', ['$event'],] },],\r\n        \"onKeyDown\": [{ type: HostListener, args: ['document:keydown', ['$event'],] },],\r\n        \"onKeyUp\": [{ type: HostListener, args: ['document:keyup', ['$event'],] },],\r\n        \"onMouseClick\": [{ type: HostListener, args: ['mousedown', ['$event'],] },],\r\n        \"onMouseMove\": [{ type: HostListener, args: ['mousemove', ['$event'],] },],\r\n        \"onMouseUp\": [{ type: HostListener, args: ['mouseup', ['$event'],] },],\r\n    };\r\n    return CanvasEventsDirective;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar PlanModule = /** @class */ (function () {\r\n    function PlanModule() {\r\n    }\r\n    PlanModule.decorators = [\r\n        { type: NgModule, args: [{\r\n                    imports: [\r\n                        CommonModule,\r\n                        BrowserAnimationsModule,\r\n                        MatIconModule,\r\n                        MatTooltipModule\r\n                    ],\r\n                    declarations: [PlanComponent, CanvasEventsDirective],\r\n                    exports: [PlanComponent]\r\n                },] },\r\n    ];\r\n    return PlanModule;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\nexport { PlanModule, CanvasEventsDirective as ɵb, PlanComponent as ɵa };\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctcGxhbi5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8vbmctcGxhbi9saWIvcGxhbi5jb21wb25lbnQudHMiLCJuZzovL25nLXBsYW4vbGliL2NhbnZhcy1ldmVudHMuZGlyZWN0aXZlLnRzIiwibmc6Ly9uZy1wbGFuL2xpYi9wbGFuLm1vZHVsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgQWZ0ZXJWaWV3SW5pdCwgT25DaGFuZ2VzLCBTaW1wbGVDaGFuZ2VzLCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYsIEhvc3RMaXN0ZW5lciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTWF0SWNvblJlZ2lzdHJ5IH0gZnJvbSBcIkBhbmd1bGFyL21hdGVyaWFsL2ljb25cIjtcbmltcG9ydCB7IERvbVNhbml0aXplciB9IGZyb20gXCJAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyXCI7XG5cbmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzLWRlY29tcG9zZSc7ICAvLyB0YWtlcyBTVkcgb3IgQ1NTMyB0cmFuc2Zvcm0gc3RyaW5ncyBhbmQgY29udmVydHMgdGhlbSBpbnRvIHVzYWJsZSB2YWx1ZXNcbmltcG9ydCAqIGFzIGQzcCBmcm9tICdkMy1wb2x5Z29uJzsgICAvLyBPcGVyYXRpb25zIG9uIHBvbHlnb25zXG5cbmV4cG9ydCBpbnRlcmZhY2UgUm9vbSB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHBvbHlnb25zOiBzdHJpbmdbXTtcbn1cblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICduZy1wbGFuJyxcbiAgICB0ZW1wbGF0ZTogYDwhLS0gVG9vbGJhciAtLT5cclxuPGRpdiBjbGFzcz1cInRvb2xiYXJcIiAqbmdJZj1cInRvb2xiYXJcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJpY29uLWRpdlwiIChjbGljayk9XCJ6b29tSW4obnVsbClcIiBtYXRUb29sdGlwPVwiWm9vbSBpblwiPlxyXG4gICAgICAgIDxtYXQtaWNvbj56b29tX2luPC9tYXQtaWNvbj5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cImljb24tZGl2XCIgKGNsaWNrKT1cInpvb21PdXQobnVsbClcIiBtYXRUb29sdGlwPVwiWm9vbSBvdXRcIj5cclxuICAgICAgICA8bWF0LWljb24+em9vbV9vdXQ8L21hdC1pY29uPlxyXG4gICAgPC9kaXY+XHJcbiAgICA8ZGl2IGNsYXNzPVwiaWNvbi1kaXZcIiAoY2xpY2spPVwiem9vbUV4dGVudHMoKVwiIG1hdFRvb2x0aXA9XCJab29tIGV4dGVudHNcIj5cclxuICAgICAgICA8bWF0LWljb24gc3ZnSWNvbj1cInpvb21fZXh0ZW50c1wiPjwvbWF0LWljb24+XHJcbiAgICA8L2Rpdj5cclxuPC9kaXY+XHJcblxyXG48ZGl2IGNsYXNzPVwiZm9vdGVyXCI+XHJcbiAgICA8cD5QcmVzcyBhbmQgaG9sZCBcIkFsdFwiIHRvIHBhbjwvcD5cclxuPC9kaXY+XHJcblxyXG48c3ZnIGNhbnZhc0V2ZW50c1xyXG4gICAgW3N0eWxlLmN1cnNvcl09XCJwYW5Nb2RlID8gJ21vdmUnIDogJ2RlZmF1bHQnXCJcclxuICAgICNjYW52YXNcclxuICAgIGNsYXNzPWNhbnZhc1xyXG4gICAgKGNsaWNrKT1cIm9uQ2FudmFzQ2xpY2soJGV2ZW50KVwiXHJcbiAgICAoem9vbU91dCk9XCJ6b29tT3V0KCRldmVudClcIlxyXG4gICAgKHpvb21Jbik9XCJ6b29tSW4oJGV2ZW50KVwiXHJcbiAgICAocGFuTW9kZSk9XCJwYW5Nb2RlID0gJGV2ZW50XCJcclxuICAgIChtb3ZlKT1cIm1vdmUoJGV2ZW50KVwiXHJcbiAgICAobW92ZUVuZCk9XCJtb3ZlRW5kKCRldmVudClcIlxyXG4gICAgKHdpbmRvdzpyZXNpemUpPVwib25XaW5kb3dSZXNpemUoKVwiXHJcbiAgICAoYWRkTm9kZU1vZGUpPVwiYWRkTm9kZU1vZGUgPSAkZXZlbnRcIlxyXG4gICAgaWQ9XCJjYW52YXNcIj5cclxuXHJcbiAgICA8IS0tRHJhdyByb29tcy0tPlxyXG4gICAgPGcgKm5nRm9yPVwibGV0IHJvb20gb2Ygcm9vbXNcIlxyXG4gICAgICAgIFthdHRyLnRyYW5zZm9ybV09XCJ0cmFuc2Zvcm1cIlxyXG4gICAgICAgIFtpZF09XCJyb29tLnVyaVwiXHJcbiAgICAgICAgKGNsaWNrKT1cInNlbGVjdFJvb20oJGV2ZW50LCByb29tKVwiXHJcbiAgICAgICAgW2F0dHIuZmlsbF09XCJyb29tLnNlbGVjdGVkID8gc2VsZWN0ZWRDb2xvciA6IHJvb20uY29sb3JcIlxyXG4gICAgICAgIGNsYXNzPVwicm9vbVwiPlxyXG5cclxuICAgICAgICA8IS0tIERyYXcgcG9seWdvbnMgLS0+XHJcbiAgICAgICAgPCEtLSA8cG9seWdvbiAqbmdGb3I9XCJsZXQgcG9seWdvbiBvZiByb29tLnBvbHlnb25zXCIgXHJcbiAgICAgICAgICAgIFthdHRyLnBvaW50c109XCJwb2x5Z29uXCIgXHJcbiAgICAgICAgICAgIGNsYXNzPVwicG9seWdvblwiPlxyXG4gICAgICAgIDwvcG9seWdvbj4gLS0+XHJcblxyXG4gICAgICAgIDwhLS0gRHJhdyBwYXRocyAtLT5cclxuICAgICAgICA8cGF0aFxyXG4gICAgICAgICAgICBbY2xhc3Muc2VsZWN0ZWQtc3BhY2VdPVwicm9vbS5zZWxlY3RlZFwiXHJcbiAgICAgICAgICAgIFthdHRyLmRdPVwicm9vbS5wYXRoXCJcclxuICAgICAgICAgICAgY2xhc3M9XCJwb2x5Z29uXCI+XHJcbiAgICAgICAgPC9wYXRoPiBcclxuXHJcbiAgICAgICAgPCEtLSBEcmF3IGNlbnRyb2lkcyAtLT5cclxuICAgICAgICA8Y2lyY2xlIFxyXG4gICAgICAgICAgICAqbmdJZj1cImNlbnRyb2lkc1wiIFxyXG4gICAgICAgICAgICBbYXR0ci5jeF09XCJyb29tLmNlbnRyb2lkWzBdXCIgXHJcbiAgICAgICAgICAgIGZpbGw9XCJibGFja1wiIFxyXG4gICAgICAgICAgICBbYXR0ci5jeV09XCJyb29tLmNlbnRyb2lkWzFdXCIgXHJcbiAgICAgICAgICAgIFthdHRyLnJdPVwic2NhbGVkKjUwMFwiPlxyXG4gICAgICAgIDwvY2lyY2xlPlxyXG5cclxuICAgICAgICA8IS0tIEFkZCBsYWJlbHMgLS0+XHJcbiAgICAgICAgPHRleHQgXHJcbiAgICAgICAgICAgIFtzdHlsZS5mb250LXNpemUuZW1dPVwiJzEyJ1wiXHJcbiAgICAgICAgICAgIHN0eWxlID0gXCJmb250LWZhbWlseTpyb2JvdG87IGZpbGw6IGJsYWNrO1wiXHJcbiAgICAgICAgICAgIHRleHQtYW5jaG9yPVwibWlkZGxlXCIgXHJcbiAgICAgICAgICAgIGFsaWdubWVudC1iYXNlbGluZT1cImNlbnRyYWxcIlxyXG4gICAgICAgICAgICBbYXR0ci54XT1cInJvb20uY2VudHJvaWRbMF1cIlxyXG4gICAgICAgICAgICBbYXR0ci5keV09XCJyb29tLmRlc2NyaXB0aW9uID8gLTE1MCA6IDBcIlxyXG4gICAgICAgICAgICBbYXR0ci55XT1cInJvb20uY2VudHJvaWRbMV1cIj5cclxuICAgICAgICAgICAge3tyb29tLm5hbWV9fVxyXG4gICAgICAgIDwvdGV4dD5cclxuXHJcbiAgICAgICAgPCEtLSBBZGQgZGVzY3JpcHRpb24gLS0+XHJcbiAgICAgICAgPHRleHQgXHJcbiAgICAgICAgICAgICpuZ0lmID0gXCJyb29tLmRlc2NyaXB0aW9uXCJcclxuICAgICAgICAgICAgW3N0eWxlLmZvbnQtc2l6ZS5lbV09XCInMTAnXCJcclxuICAgICAgICAgICAgc3R5bGUgPSBcImZvbnQtZmFtaWx5OnJvYm90bzsgZmlsbDogYmxhY2s7XCJcclxuICAgICAgICAgICAgdGV4dC1hbmNob3I9XCJtaWRkbGVcIiBcclxuICAgICAgICAgICAgYWxpZ25tZW50LWJhc2VsaW5lPVwiY2VudHJhbFwiXHJcbiAgICAgICAgICAgIFthdHRyLnhdPVwicm9vbS5jZW50cm9pZFswXVwiXHJcbiAgICAgICAgICAgIFthdHRyLnldPVwicm9vbS5jZW50cm9pZFsxXVwiXHJcbiAgICAgICAgICAgIGR5PVwiMTUwXCI+XHJcbiAgICAgICAgICAgIHt7cm9vbS5kZXNjcmlwdGlvbn19XHJcbiAgICAgICAgPC90ZXh0PlxyXG4gICAgPC9nPlxyXG5cclxuPC9zdmc+YCxcbiAgICBzdHlsZXM6IFtgLmNhbnZhc3std2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7Ym90dG9tOjA7cmlnaHQ6MDt6LWluZGV4Oi0xfS5wb2x5Z29ue3N0cm9rZTojMDAwO3N0cm9rZS13aWR0aDoxO3ZlY3Rvci1lZmZlY3Q6bm9uLXNjYWxpbmctc3Ryb2tlO2ZpbGwtcnVsZTpldmVub2RkfS5yb29tOmhvdmVye29wYWNpdHk6LjU7Y3Vyc29yOnBvaW50ZXJ9LnNlbGVjdGVkLXNwYWNle3N0cm9rZS13aWR0aDoyfS50b29sYmFye3Bvc2l0aW9uOmFic29sdXRlO2NvbG9yOnJlZDtyaWdodDoyMHB4O3dpZHRoOjEwMCV9Lmljb24tZGl2Pi5tYXQtaWNvbntmbG9hdDpyaWdodDstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDIyMCwyMjAsMjIwLC4zKTtib3JkZXItd2lkdGg6MXB4O2JvcmRlci1yYWRpdXM6NXB4O21hcmdpbi1sZWZ0OjVweDtwYWRkaW5nOjVweDt6LWluZGV4OjF9Lm1hdC1pY29ue2NvbG9yOnJnYmEoMCwwLDAsLjYpO2ZvbnQtc2l6ZTozMHB4O2hlaWdodDozMHB4O3dpZHRoOjMwcHg7ei1pbmRleDoxMH0ubWF0LWljb246aG92ZXJ7Y3Vyc29yOnBvaW50ZXI7Y29sb3I6cmdiYSgwLDAsMCwxKX0uZm9vdGVye2JhY2tncm91bmQtY29sb3I6cmdiYSgyMjAsMjIwLDIyMCwuMyk7cG9zaXRpb246YWJzb2x1dGU7Zm9udC1mYW1pbHk6Y29uc29sYXM7Zm9udC1zaXplOjEycHg7cGFkZGluZzowIDEwcHg7Ym9yZGVyLXJhZGl1czo1cHg7Ym90dG9tOjEwcHh9YF1cbn0pXG5leHBvcnQgY2xhc3MgUGxhbkNvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQge1xuXG4gICAgQE91dHB1dCgpIGNsaWNrZWRSb29tID0gbmV3IEV2ZW50RW1pdHRlcigpOyAgICAgICAgICAgICAvLyBDbGlja2VkIHJvb21cbiAgICBAT3V0cHV0KCkgY2xpY2tlZENhbnZhcyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICAgIEBJbnB1dCgpIHByaXZhdGUgZGF0YTsgICAgICAgICAgICAgICAgICAgICAgIC8vZ2VvSlNPTlxuICAgIEBJbnB1dCgpIHByaXZhdGUgY29sb3JzOyAgICAgICAgICAgICAgICAgICAgIC8vY29sb3Igc2NoZW1hXG4gICAgQElucHV0KCkgcHVibGljIGNlbnRyb2lkczogYm9vbGVhbjsgICAgICAgICAgLy9jb2xvciBzY2hlbWFcbiAgICBASW5wdXQoKSBwdWJsaWMgdG9vbGJhcjogYm9vbGVhbjsgICAgICAgICAgICAvL3Rvb2xiYXIgdmlzaWJsZT9cbiAgICBASW5wdXQoKSBwcml2YXRlIHNlbGVjdGVkOiBzdHJpbmdbXTsgICAgICAgICAvL1NwYWNlcyB0byBiZSBoaWdobGlnaHRlZFxuXG4gICAgLy8gU3R5bGVzXG4gICAgQElucHV0KCkgcHVibGljIHNlbGVjdGVkQ29sb3I6IHN0cmluZyA9ICcjZWJlZmU0JztcbiAgICBASW5wdXQoKSBwdWJsaWMgZGVmYXVsdENvbG9yOiBzdHJpbmcgPSAnI2YyZmxlYyc7XG5cbiAgICBwdWJsaWMgcm9vbXM7XG5cbiAgICAvLyBDYW52YXNcbiAgICBwcml2YXRlIGNhbnZhc1dpZHRoO1xuICAgIHByaXZhdGUgY2FudmFzSGVpZ2h0O1xuICAgIHByaXZhdGUgY2FudmFzQ2VudHJvaWQ7XG5cbiAgICAvLyBTY2FsZSAvIG9mZnNldFxuICAgIC8vIFRoZXNlIGZhY3RvcnMgYXJlIGNhbGN1bGF0ZWQgZnJvbSBnZW9tZXRyeSBleHRlbmRzXG4gICAgcHJpdmF0ZSBiYXNlU2NhbGUgPSAwLjk7XG4gICAgcHJpdmF0ZSBiYXNlT2Zmc2V0WCA9IDA7XG4gICAgcHJpdmF0ZSBiYXNlT2Zmc2V0WSA9IDA7XG5cbiAgICAvLyBnZW9tZXRyeVxuICAgIHB1YmxpYyB0cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7dGhpcy5iYXNlT2Zmc2V0WH0sJHt0aGlzLmJhc2VPZmZzZXRZfSkgc2NhbGUoJHt0aGlzLmJhc2VTY2FsZX0sJHt0aGlzLmJhc2VTY2FsZX0pYDtcbiAgICBwcml2YXRlIG1vdmVkWDogbnVtYmVyID0gMDsgLy8gc3RvcmUgbW92ZSBzdGF0ZVxuICAgIHByaXZhdGUgbW92ZWRZOiBudW1iZXIgPSAwOyAvLyBzdG9yZSBtb3ZlIHN0YXRlXG4gICAgcHVibGljIHNjYWxlZDogbnVtYmVyID0gMSAvLyBzdG9yZSBzY2FsZSBzdGF0ZVxuICAgIHB1YmxpYyBib3VuZGluZ0JveDsgICAgICAgICAvLyBTdG9yZXMgYm91bmRpbmdCb3ggYXMgW3hNaW4sIHlNaW4sIHhNYXgsIHlNYXhdXG5cbiAgICAvLyBtb2Rlc1xuICAgIHB1YmxpYyBwYW5Nb2RlOiBib29sZWFuID0gZmFsc2U7XG4gICAgcHVibGljIGFkZE5vZGVNb2RlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBAVmlld0NoaWxkKCdjYW52YXMnKSBwcml2YXRlIHBsYW5Db250YWluZXI6IEVsZW1lbnRSZWY7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgIHByaXZhdGUgbWF0SWNvblJlZ2lzdHJ5OiBNYXRJY29uUmVnaXN0cnksXG4gICAgICBwcml2YXRlIGRvbVNhbml0aXplcjogRG9tU2FuaXRpemVyXG4gICAgKSB7fVxuXG4gICAgbmdBZnRlclZpZXdJbml0KCl7XG4gICAgICAgIHRoaXMuZ2V0Q2FudmFzU2l6ZSgpO1xuICAgICAgICAvLyB0aGlzLmFkZFNWR2ljb25zKCk7XG4gICAgfVxuXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuICAgICAgICBpZiAoY2hhbmdlcy5kYXRhICYmIGNoYW5nZXMuZGF0YS5jdXJyZW50VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IGNoYW5nZXMuZGF0YS5jdXJyZW50VmFsdWU7XG4gICAgICAgICAgICB0aGlzLmV4dHJhY3RSb29tcygpO1xuICAgICAgICAgICAgdGhpcy5nZXRTY2FsZU9mZnNldCgpO1xuICAgICAgICAgICAgdGhpcy56b29tRXh0ZW50cygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFuZ2VzLmNvbG9ycyAmJiBjaGFuZ2VzLmNvbG9ycy5jdXJyZW50VmFsdWUpe1xuICAgICAgICAgICAgdGhpcy5kZWZpbmVDb2xvcnMoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhbmdlcy5zZWxlY3RlZCl7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdGlvbigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gYWRkU1ZHaWNvbnMoKXtcbiAgICAvLyAgIHRoaXMubWF0SWNvblJlZ2lzdHJ5LmFkZFN2Z0ljb24oXG4gICAgLy8gICAgIFwiem9vbV9leHRlbnRzXCIsXG4gICAgLy8gICAgIHRoaXMuZG9tU2FuaXRpemVyLmJ5cGFzc1NlY3VyaXR5VHJ1c3RSZXNvdXJjZVVybChcIi4uL2Fzc2V0cy96b29tX2V4dGVudHMuc3ZnXCIpXG4gICAgLy8gICApO1xuICAgIC8vIH1cblxuICAgIHVwZGF0ZVNlbGVjdGlvbigpe1xuICAgICAgICBpZighdGhpcy5yb29tcykgcmV0dXJuO1xuICAgICAgICB0aGlzLnJvb21zID0gdGhpcy5yb29tcy5tYXAoeCA9PiB7XG4gICAgICAgICAgICBpZih0aGlzLnNlbGVjdGVkLmluZGV4T2YoeC51cmkpICE9IC0xKXtcbiAgICAgICAgICAgICAgICB4LnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHguc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGRlZmluZUNvbG9ycygpe1xuICAgICAgICB0aGlzLnJvb21zLm1hcCh4ID0+IHtcbiAgICAgICAgICAgIHZhciBtYXRjaCA9IHRoaXMuY29sb3JzLmZpbHRlcih5ID0+IHkudXJpID09IHgudXJpKTtcbiAgICAgICAgICAgIGlmKG1hdGNoLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgICAgIHguY29sb3IgPSBtYXRjaFswXS5jb2xvcjtcbiAgICAgICAgICAgICAgICB4LmRlc2NyaXB0aW9uID0gbWF0Y2hbMF0udmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0Q2FudmFzU2l6ZSgpe1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5wbGFuQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IHNpemUgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB0aGlzLmNhbnZhc1dpZHRoID0gc2l6ZS53aWR0aDtcbiAgICAgICAgdGhpcy5jYW52YXNIZWlnaHQgPSBzaXplLmhlaWdodDtcbiAgICAgICAgdGhpcy5jYW52YXNDZW50cm9pZCA9IFt0aGlzLmNhbnZhc1dpZHRoLzIsIHRoaXMuY2FudmFzSGVpZ2h0LzJdOyAgICAgICAgXG4gICAgfVxuXG4gICAgZXh0cmFjdFJvb21zKCl7XG4gICAgICAgIGlmKCF0aGlzLmRhdGEuZmVhdHVyZXMpIHJldHVybiB0aGlzLnJvb21zID0gbnVsbDtcblxuICAgICAgICAvLyBGb3IgYm91bmRpbmcgYm94IFt4TWluLCB5TWluLCB4TWF4LCB5TWF4XVxuICAgICAgICB2YXIgeE1pbjtcbiAgICAgICAgdmFyIHlNaW47XG4gICAgICAgIHZhciB4TWF4O1xuICAgICAgICB2YXIgeU1heDtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucm9vbXMgPSB0aGlzLmRhdGEuZmVhdHVyZXMubWFwKHJvb20gPT4ge1xuICAgICAgICAgICAgdmFyIHBvbHlnb25zID0gW107XG4gICAgICAgICAgICB2YXIgcm9vbVBhdGggPSAnJztcbiAgICAgICAgICAgIHZhciBjZW50cm9pZDtcbiAgICAgICAgICAgIGlmKHJvb20uZ2VvbWV0cnkgJiYgcm9vbS5nZW9tZXRyeS50eXBlID09IFwiUG9seWdvblwiKXtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2YXIgcm9vbVBvbHlnb25zID0gW107ICAvLyBBbGxvdyBtdWx0aSBwb2x5Z29ucyBpZiBkb3VnaG51dCByb29tXG4gICAgICAgICAgICAgICAgcm9vbS5nZW9tZXRyeS5jb29yZGluYXRlcy5mb3JFYWNoKHBvbHlnb24gPT4ge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBwb2ludHMgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhdGggPSAnJztcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVmbGVjdCB5IGNvb3JkaW5hdGVzIHRvIGZpdCBicm93c2VyIGNvb3JkaW5hdGUgc3lzdGVtIGFuZCBleHRyYWN0IHRvIHBvbHlnb25cbiAgICAgICAgICAgICAgICAgICAgcG9seWdvbi5tYXAoKGNvb3JkaW5hdGUsaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gY29vcmRpbmF0ZVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5ID0gLWNvb3JkaW5hdGVbMV07IC8vIHJlZmxlY3Qgc2luY2UgU1ZHIHVzZXMgcmVmbGVjdGVkIGNvb3JkaW5hdGUgc3lzdGVtXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50cys9IGAke3h9LCR7eX0gYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGgrPSAoaW5kZXggPT0gMCkgPyBgTSR7eH0sJHt5fSBgIDogYEwke3h9LCR7eX0gYDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29vcmRpbmF0ZVsxXSA9IHk7IC8vIFVwZGF0ZSBwb2x5Z29uIHdpdGggbmV3IHlcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2V0IGJvdW5kaW5nIGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXhNaW4gfHwgeCA8IHhNaW4pIHhNaW4gPSB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXhNYXggfHwgeCA+IHhNYXgpIHhNYXggPSB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXlNaW4gfHwgeSA8IHlNaW4pIHlNaW4gPSB5O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXlNYXggfHwgeSA+IHlNYXgpIHlNYXggPSB5O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29vcmRpbmF0ZTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzID0gcG9pbnRzLnRyaW0oKTsgICAgLy8gcmVtb3ZlIGxhc3Qgc3BhY2VcbiAgICAgICAgICAgICAgICAgICAgcGF0aCA9IHBhdGgudHJpbSgpOyAgICAgICAgIC8vIHJlbW92ZSBsYXN0IHNwYWNlXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHBvbHlnb24gY2VudHJvaWQgZnJvbSBmaXJzdCBwb2x5Z29uXG4gICAgICAgICAgICAgICAgICAgIGlmKHJvb21Qb2x5Z29ucy5sZW5ndGggPCAxKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRyb2lkID0gZDNwLnBvbHlnb25DZW50cm9pZChwb2x5Z29uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJvb21Qb2x5Z29ucy5wdXNoKHBvaW50cyk7XG4gICAgICAgICAgICAgICAgICAgIHJvb21QYXRoKz1wYXRoO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHBvbHlnb25zLnB1c2gocm9vbVBvbHlnb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBuYW1lID0gcm9vbS5wcm9wZXJ0aWVzLm5hbWU7XG4gICAgICAgICAgICB2YXIgdXJpID0gcm9vbS5wcm9wZXJ0aWVzLnVyaTtcbiAgICAgICAgICAgIHZhciBjb2xvciA9IHJvb20ucHJvcGVydGllcy5jb2xvciA/IHJvb20ucHJvcGVydGllcy5jb2xvciA6IHRoaXMuZGVmYXVsdENvbG9yO1xuICAgICAgICAgICAgdmFyIGRlc2NyaXB0aW9uID0gcm9vbS5wcm9wZXJ0aWVzLmRlc2NyaXB0aW9uID8gcm9vbS5wcm9wZXJ0aWVzLmRlc2NyaXB0aW9uIDogJyc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFN0b3JlIGJvdW5kaW5nIGJveFxuICAgICAgICAgICAgdGhpcy5ib3VuZGluZ0JveCA9IFt4TWluLCB5TWluLCB4TWF4LCB5TWF4XTtcblxuICAgICAgICAgICAgcmV0dXJuIHtuYW1lOiBuYW1lLCB1cmk6IHVyaSwgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLCBjb2xvcjogY29sb3IsIHBvbHlnb25zOiBwb2x5Z29ucywgcGF0aDpyb29tUGF0aCwgY2VudHJvaWQ6IGNlbnRyb2lkfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRTY2FsZU9mZnNldCgpIHsgICBcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGRhdGEgc2l6ZVxuICAgICAgICB2YXIgYmIgPSB0aGlzLmJvdW5kaW5nQm94O1xuICAgICAgICB2YXIgZGF0YVdpZHRoID0gYmJbMl0tYmJbMF07XG4gICAgICAgIHZhciBkYXRhSGVpZ2h0ID0gYmJbM10tYmJbMV07XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHNjYWxlIGZhY3RvcnNcbiAgICAgICAgdmFyIHNjYWxlV2lkdGggPSB0aGlzLmNhbnZhc1dpZHRoL2RhdGFXaWR0aDtcbiAgICAgICAgdmFyIHNjYWxlSGVpZ2h0ID0gdGhpcy5jYW52YXNIZWlnaHQvZGF0YUhlaWdodDtcbiAgICAgICAgdmFyIHNjYWxlID0gTWF0aC5taW4oc2NhbGVIZWlnaHQsc2NhbGVXaWR0aCk7XG5cbiAgICAgICAgdmFyIHNjYWxlZERhdGFDZW50cm9pZCA9IFtzY2FsZSooYmJbMF0rZGF0YVdpZHRoLzIpLCBzY2FsZSooYmJbMV0rZGF0YUhlaWdodC8yKV07XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIG9mZnNldCBmYWN0b3JzXG4gICAgICAgIHZhciBvZmZzZXRYID0gdGhpcy5jYW52YXNDZW50cm9pZFswXS1zY2FsZWREYXRhQ2VudHJvaWRbMF07XG4gICAgICAgIHZhciBvZmZzZXRZID0gdGhpcy5jYW52YXNDZW50cm9pZFsxXS1zY2FsZWREYXRhQ2VudHJvaWRbMV07XG5cbiAgICAgICAgLy8gU2V0IGdsb2JhbCB2YXJpYWJsZXNcbiAgICAgICAgdGhpcy5iYXNlT2Zmc2V0WCA9IG9mZnNldFg7XG4gICAgICAgIHRoaXMuYmFzZU9mZnNldFkgPSBvZmZzZXRZO1xuICAgICAgICB0aGlzLmJhc2VTY2FsZSA9IHNjYWxlO1xuICAgIFxuICAgICAgICByZXR1cm4gW3NjYWxlLG9mZnNldFgsb2Zmc2V0WV1cbiAgICB9XG5cbiAgICBtb3ZlKGRpc3BsYWNlbWVudCl7XG4gICAgICAgIGlmKGRpc3BsYWNlbWVudCl7XG4gICAgICAgICAgICB0aGlzLnpvb21IYW5kbGVyKHVuZGVmaW5lZCxkaXNwbGFjZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbW92ZUVuZChkaXNwbGFjZW1lbnQpe1xuICAgICAgICAvLyBVcGRhdGUgbW92ZWQgY29vcmRpbmF0ZXNcbiAgICAgICAgdGhpcy5tb3ZlZFggPSB0aGlzLm1vdmVkWCtkaXNwbGFjZW1lbnRbMF07XG4gICAgICAgIHRoaXMubW92ZWRZID0gdGhpcy5tb3ZlZFkrZGlzcGxhY2VtZW50WzFdO1xuICAgIH1cblxuICAgIG9uV2luZG93UmVzaXplKCl7XG4gICAgICAgIHRoaXMuZ2V0Q2FudmFzU2l6ZSgpO1xuICAgICAgICB0aGlzLmdldFNjYWxlT2Zmc2V0KCk7XG4gICAgICAgIHRoaXMuem9vbUV4dGVudHMoKTtcbiAgICB9XG5cbiAgICB6b29tRXh0ZW50cygpe1xuICAgICAgICB0aGlzLnNjYWxlZCA9IHRoaXMuYmFzZVNjYWxlKjAuOTU7XG4gICAgICAgIHRoaXMubW92ZWRYID0gMDtcbiAgICAgICAgdGhpcy5tb3ZlZFkgPSAwO1xuICAgICAgICB0aGlzLnpvb21IYW5kbGVyKCk7XG4gICAgfVxuXG4gICAgem9vbU91dChldil7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBjdXJyZW50IHNjYWxlXG4gICAgICAgIHZhciBzY2FsZUZhY3RvciA9IHRoaXMuYmFzZVNjYWxlLzU7XG4gICAgICAgIHRoaXMuc2NhbGVkID0gdGhpcy5zY2FsZWQtc2NhbGVGYWN0b3I7XG4gICAgICAgIHRoaXMuem9vbUhhbmRsZXIoZXYpO1xuICAgIH1cblxuICAgIHpvb21Jbihldil7XG4gICAgICAgIHZhciBzY2FsZUZhY3RvciA9IHRoaXMuYmFzZVNjYWxlLzU7XG4gICAgICAgIHRoaXMuc2NhbGVkID0gdGhpcy5zY2FsZWQrc2NhbGVGYWN0b3I7XG4gICAgICAgIHRoaXMuem9vbUhhbmRsZXIoZXYpO1xuICAgIH1cblxuICAgIHpvb21IYW5kbGVyKGV2PyxkaXNwbGFjZW1lbnQ/KXtcblxuICAgICAgICB2YXIgdHJuczEgPSAnJztcblxuICAgICAgICBpZihkaXNwbGFjZW1lbnQpe1xuICAgICAgICAgICAgdmFyIGR4ID0gdGhpcy5iYXNlT2Zmc2V0WCArIHRoaXMubW92ZWRYICsgZGlzcGxhY2VtZW50WzBdO1xuICAgICAgICAgICAgdmFyIGR5ID0gdGhpcy5iYXNlT2Zmc2V0WSArIHRoaXMubW92ZWRZICsgZGlzcGxhY2VtZW50WzFdO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGR4ID0gdGhpcy5iYXNlT2Zmc2V0WCArIHRoaXMubW92ZWRYO1xuICAgICAgICAgICAgZHkgPSB0aGlzLmJhc2VPZmZzZXRZICsgdGhpcy5tb3ZlZFk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGlzIHNob3VsZCBiZSBhZGp1c3RlZCB0byBjZW50ZXIgYXQgbW91c2UgcG9zaXRpb24gd2hpbGUgem9vbWluZ1xuXG4gICAgICAgIC8vIGlmKGV2ICYmIGV2Lm9mZnNldFgpe1xuICAgICAgICAvLyAgICAgLy8gR2V0IG1vdXNlIHBvc2l0aW9uIHJlbGF0aXZlIHRvIGNhbnZhcyBjZW50ZXIgcG9pbnQgYW5kIG1vdmVcbiAgICAgICAgLy8gICAgIHZhciBteCA9IGV2Lm9mZnNldFgtdGhpcy5jYW52YXNDZW50cm9pZFswXTtcbiAgICAgICAgLy8gICAgIHZhciBteSA9IGV2Lm9mZnNldFktdGhpcy5jYW52YXNDZW50cm9pZFsxXTtcbiAgICAgICAgLy8gICAgIHZhciBkeDIgPSBteDtcbiAgICAgICAgLy8gICAgIHZhciBkeTIgPSBteTtcbiAgICAgICAgLy8gICAgIHRybnMxID0gYHRyYW5zbGF0ZSgke2R4Mn0sJHtkeTJ9KWA7XG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyh0cm5zMSlcbiAgICAgICAgLy8gfVxuXG4gICAgICAgIHZhciBvbGRTY2FsZSA9IGQzLmRlY29tcG9zZSh0aGlzLnRyYW5zZm9ybSkuc2NhbGU7XG4gICAgICAgIHZhciBvbGRUcm5zID0gZDMuZGVjb21wb3NlKHRoaXMudHJhbnNmb3JtKS50cmFuc2xhdGU7XG4gICAgICAgIHZhciBzY2FsZSA9IGBzY2FsZSgke3RoaXMuc2NhbGVkfSwke3RoaXMuc2NhbGVkfSlgO1xuXG4gICAgICAgIHZhciB0cm5zID0gYHRyYW5zbGF0ZSgke2R4fSwke2R5fSlgO1xuXG4gICAgICAgIC8vIFVwZGF0ZSB0cmFuc2Zvcm0gYXR0cmlidXRlXG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gdHJucyt0cm5zMStzY2FsZTtcbiAgICAgICAgLy8gdGhpcy50cmFuc2Zvcm0gPSB0aGlzLnRyYW5zZm9ybS5yZXBsYWNlKG9sZFNjYWxlLHNjYWxlKTtcbiAgICB9XG5cbiAgICBzZWxlY3RSb29tKGV2LCByb29tKXtcbiAgICAgICAgLy8gR2V0IGNvb3JkaW5hdGVzXG4gICAgICAgIHZhciBzY2FsZSA9IHRoaXMuc2NhbGVkO1xuICAgICAgICB2YXIgb2Zmc2V0WCA9IHRoaXMuYmFzZU9mZnNldFgrdGhpcy5tb3ZlZFg7XG4gICAgICAgIHZhciBvZmZzZXRZID0gdGhpcy5iYXNlT2Zmc2V0WSt0aGlzLm1vdmVkWTtcbiAgICAgICAgdmFyIHNjcmVlblggPSBldi5vZmZzZXRYO1xuICAgICAgICB2YXIgc2NyZWVuWSA9IGV2Lm9mZnNldFg7XG5cbiAgICAgICAgdmFyIHggPSAoc2NyZWVuWC1vZmZzZXRYKS9zY2FsZTtcbiAgICAgICAgdmFyIHkgPSAoc2NyZWVuWS1vZmZzZXRZKS9zY2FsZTtcbiAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gW3gsLXldO1xuXG4gICAgICAgIC8vIEVtaXQgZXZlbnRcbiAgICAgICAgdGhpcy5jbGlja2VkUm9vbS5lbWl0KHt1cmk6IHJvb20udXJpLCBjb29yZGluYXRlczogY29vcmRpbmF0ZXN9KTtcbiAgICB9XG5cbiAgICBvbkNhbnZhc0NsaWNrKGV2KXtcbiAgICAgICAgaWYoZXYudGFyZ2V0LmlkICE9ICdjYW52YXMnKSByZXR1cm47XG4gICAgICAgIHRoaXMuY2xpY2tlZENhbnZhcy5lbWl0KCk7XG4gICAgfVxuXG59IiwiaW1wb3J0IHsgRGlyZWN0aXZlLCBPdXRwdXQsIEhvc3RMaXN0ZW5lciwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5ARGlyZWN0aXZlKHsgc2VsZWN0b3I6ICdbY2FudmFzRXZlbnRzXScgfSlcclxuZXhwb3J0IGNsYXNzIENhbnZhc0V2ZW50c0RpcmVjdGl2ZSB7XHJcblxyXG4gIEBPdXRwdXQoKSB6b29tT3V0ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gIEBPdXRwdXQoKSB6b29tSW4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgQE91dHB1dCgpIG1vdmVJbml0ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gIEBPdXRwdXQoKSBtb3ZlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gIEBPdXRwdXQoKSBtb3ZlRW5kID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gIEBPdXRwdXQoKSBwYW5Nb2RlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gIEBPdXRwdXQoKSBhZGROb2RlTW9kZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgcHJpdmF0ZSBtb3VzZURvd246IGJvb2xlYW4gPSBmYWxzZTtcclxuICBwcml2YXRlIGRyYWdNb2RlOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gIHByaXZhdGUgY2xpY2tYO1xyXG4gIHByaXZhdGUgY2xpY2tZO1xyXG5cclxuICBASG9zdExpc3RlbmVyKCdtb3VzZXdoZWVsJywgWyckZXZlbnQnXSkgb25Nb3VzZVdoZWVsQ2hyb21lKGV2ZW50OiBhbnkpIHtcclxuICAgIHRoaXMubW91c2VXaGVlbEZ1bmMoZXZlbnQpO1xyXG4gIH1cclxuXHJcbiAgQEhvc3RMaXN0ZW5lcignRE9NTW91c2VTY3JvbGwnLCBbJyRldmVudCddKSBvbk1vdXNlV2hlZWxGaXJlZm94KGV2ZW50OiBhbnkpIHtcclxuICAgIHRoaXMubW91c2VXaGVlbEZ1bmMoZXZlbnQpO1xyXG4gIH1cclxuXHJcbiAgQEhvc3RMaXN0ZW5lcignb25tb3VzZXdoZWVsJywgWyckZXZlbnQnXSkgb25Nb3VzZVdoZWVsSUUoZXZlbnQ6IGFueSkge1xyXG4gICAgdGhpcy5tb3VzZVdoZWVsRnVuYyhldmVudCk7XHJcbiAgfVxyXG5cclxuICBASG9zdExpc3RlbmVyKCdkb2N1bWVudDprZXlkb3duJywgWyckZXZlbnQnXSlcclxuICBvbktleURvd24oZXY6S2V5Ym9hcmRFdmVudCl7XHJcbiAgICAgIGlmKGV2LmtleSA9PSBcIkFycm93RG93blwiKXtcclxuICAgICAgICB0aGlzLnpvb21Jbi5lbWl0KGV2KTtcclxuICAgICAgfVxyXG4gICAgICBpZihldi5rZXkgPT0gXCJBcnJvd1VwXCIpe1xyXG4gICAgICAgIHRoaXMuem9vbU91dC5lbWl0KGV2KTtcclxuICAgICAgfVxyXG4gICAgICBpZihldi5rZXkgPT0gXCJBbHRcIil7XHJcbiAgICAgICAgLy8gZW5hYmxlIGRyYWcgbW9kZSBpZiBob2xkaW5nIEFsdFxyXG4gICAgICAgIHRoaXMuZHJhZ01vZGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucGFuTW9kZS5lbWl0KHRydWUpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKGV2LmtleSA9PSBcIkNvbnRyb2xcIil7XHJcbiAgICAgICAgdGhpcy5hZGROb2RlTW9kZS5lbWl0KHRydWUpO1xyXG4gICAgICB9XHJcbiAgfVxyXG5cclxuICBASG9zdExpc3RlbmVyKCdkb2N1bWVudDprZXl1cCcsIFsnJGV2ZW50J10pXHJcbiAgb25LZXlVcChldjpLZXlib2FyZEV2ZW50KXtcclxuICAgICAgaWYoZXYua2V5ID09IFwiQWx0XCIpe1xyXG4gICAgICAgIC8vIGRpc2FibGUgZHJhZyBtb2RlIGlmIHJlbGVhc2luZyBBbHRcclxuICAgICAgICB0aGlzLmRyYWdNb2RlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5wYW5Nb2RlLmVtaXQoZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKGV2LmtleSA9PSBcIkNvbnRyb2xcIil7XHJcbiAgICAgICAgdGhpcy5hZGROb2RlTW9kZS5lbWl0KGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICB9XHJcblxyXG4gIEBIb3N0TGlzdGVuZXIoJ21vdXNlZG93bicsIFsnJGV2ZW50J10pXHJcbiAgb25Nb3VzZUNsaWNrKGV2OiBNb3VzZUV2ZW50KSB7XHJcblxyXG4gICAgICB0aGlzLm1vdXNlRG93biA9IHRydWU7XHJcblxyXG4gICAgICAvLyBlbmFibGUgZHJhZyBtb2RlIGlmIGNsaWNraW5nIG1pZGRsZSBidXR0b25cclxuICAgICAgaWYoZXYuYnV0dG9uID09IDEpIHRoaXMuZHJhZ01vZGUgPSB0cnVlO1xyXG5cclxuICAgICAgaWYodGhpcy5kcmFnTW9kZSl7XHJcbiAgICAgICAgdGhpcy5jbGlja1ggPSBldi5vZmZzZXRYO1xyXG4gICAgICAgIHRoaXMuY2xpY2tZID0gZXYub2Zmc2V0WTtcclxuICAgICAgICB0aGlzLnBhbk1vZGUuZW1pdCh0cnVlKTtcclxuICAgICAgICB0aGlzLm1vdmVJbml0LmVtaXQoW2V2Lm9mZnNldFgsZXYub2Zmc2V0WV0pO1xyXG4gICAgICB9XHJcbiAgfVxyXG5cclxuICBASG9zdExpc3RlbmVyKCdtb3VzZW1vdmUnLCBbJyRldmVudCddKVxyXG4gIG9uTW91c2VNb3ZlKGV2OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgIGlmKHRoaXMuZHJhZ01vZGUgJiYgdGhpcy5tb3VzZURvd24pe1xyXG4gICAgICAgICAgdGhpcy5tb3ZlLmVtaXQoW2V2Lm9mZnNldFgtdGhpcy5jbGlja1gsZXYub2Zmc2V0WS10aGlzLmNsaWNrWV0pO1xyXG4gICAgICB9XHJcbiAgfVxyXG5cclxuICBASG9zdExpc3RlbmVyKCdtb3VzZXVwJywgWyckZXZlbnQnXSlcclxuICBvbk1vdXNlVXAoZXY6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcclxuICAgICAgaWYodGhpcy5kcmFnTW9kZSl7XHJcbiAgICAgICAgdGhpcy5kcmFnTW9kZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucGFuTW9kZS5lbWl0KGZhbHNlKTtcclxuICAgICAgICB0aGlzLm1vdmVFbmQuZW1pdChbZXYub2Zmc2V0WC10aGlzLmNsaWNrWCxldi5vZmZzZXRZLXRoaXMuY2xpY2tZXSk7XHJcbiAgICAgIH1cclxuICB9XHJcblxyXG4gIG1vdXNlV2hlZWxGdW5jKGV2ZW50OiBhbnkpIHtcclxuICAgIHZhciBldmVudCA9IHdpbmRvdy5ldmVudCB8fCBldmVudDsgLy8gb2xkIElFIHN1cHBvcnRcclxuICAgIHZhciBkZWx0YSA9IE1hdGgubWF4KC0xLCBNYXRoLm1pbigxLCAoZXZlbnQud2hlZWxEZWx0YSB8fCAtZXZlbnQuZGV0YWlsKSkpO1xyXG4gICAgaWYoZGVsdGEgPiAwKSB7XHJcbiAgICAgICAgdGhpcy56b29tSW4uZW1pdChldmVudCk7XHJcbiAgICB9IGVsc2UgaWYoZGVsdGEgPCAwKSB7XHJcbiAgICAgICAgdGhpcy56b29tT3V0LmVtaXQoZXZlbnQpO1xyXG4gICAgfVxyXG4gICAgLy8gZm9yIElFXHJcbiAgICBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xyXG4gICAgLy8gZm9yIENocm9tZSBhbmQgRmlyZWZveFxyXG4gICAgaWYoZXZlbnQucHJldmVudERlZmF1bHQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG4gIH1cclxufSIsImltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBQbGFuQ29tcG9uZW50IH0gZnJvbSAnLi9wbGFuLmNvbXBvbmVudCc7XG5cbi8vIEFuZ3VsYXIgbWF0ZXJpYWxcbmltcG9ydCB7IEJyb3dzZXJBbmltYXRpb25zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci9hbmltYXRpb25zJztcbmltcG9ydCB7IE1hdEljb25Nb2R1bGUsIFxuICAgICAgICAgTWF0VG9vbHRpcE1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcblxuLy8gRGlyZWN0aXZlc1xuaW1wb3J0IHsgQ2FudmFzRXZlbnRzRGlyZWN0aXZlIH0gZnJvbSAnLi9jYW52YXMtZXZlbnRzLmRpcmVjdGl2ZSc7XG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtcbiAgICBDb21tb25Nb2R1bGUsXG4gICAgQnJvd3NlckFuaW1hdGlvbnNNb2R1bGUsXG4gICAgTWF0SWNvbk1vZHVsZSxcbiAgICBNYXRUb29sdGlwTW9kdWxlXG4gIF0sXG4gIGRlY2xhcmF0aW9uczogW1BsYW5Db21wb25lbnQsIENhbnZhc0V2ZW50c0RpcmVjdGl2ZV0sXG4gIGV4cG9ydHM6IFtQbGFuQ29tcG9uZW50XVxufSlcbmV4cG9ydCBjbGFzcyBQbGFuTW9kdWxlIHsgfVxuIl0sIm5hbWVzIjpbImQzcC5wb2x5Z29uQ2VudHJvaWQiLCJkMy5kZWNvbXBvc2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTtJQWlKSSx1QkFDVSxpQkFDQTtRQURBLG9CQUFlLEdBQWYsZUFBZTtRQUNmLGlCQUFZLEdBQVosWUFBWTsyQkF6Q0UsSUFBSSxZQUFZLEVBQUU7NkJBQ2hCLElBQUksWUFBWSxFQUFFOzs2QkFTSixTQUFTOzRCQUNWLFNBQVM7eUJBVzVCLEdBQUc7MkJBQ0QsQ0FBQzsyQkFDRCxDQUFDO3lCQUdKLGVBQWEsSUFBSSxDQUFDLFdBQVcsU0FBSSxJQUFJLENBQUMsV0FBVyxnQkFBVyxJQUFJLENBQUMsU0FBUyxTQUFJLElBQUksQ0FBQyxTQUFTLE1BQUc7c0JBQ3pGLENBQUM7c0JBQ0QsQ0FBQztzQkFDRixDQUFDO3VCQUlDLEtBQUs7MkJBQ0QsS0FBSztLQU8vQjs7OztJQUVKLHVDQUFlOzs7SUFBZjtRQUNJLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQzs7S0FFeEI7Ozs7O0lBRUQsbUNBQVc7Ozs7SUFBWCxVQUFZLE9BQXNCO1FBQzlCLElBQUksT0FBTyxZQUFTLE9BQU8sU0FBTSxZQUFZLEVBQUU7WUFDM0MsSUFBSSxDQUFDLElBQUksR0FBRyxPQUFPLFNBQU0sWUFBWSxDQUFDO1lBQ3RDLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztZQUNwQixJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7WUFDdEIsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1NBQ3RCO1FBQ0QsSUFBSSxPQUFPLGNBQVcsT0FBTyxXQUFRLFlBQVksRUFBQztZQUM5QyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7U0FDdkI7UUFDRCxJQUFJLE9BQU8sY0FBVTtZQUNqQixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7U0FDMUI7S0FDSjs7Ozs7Ozs7OztJQVNELHVDQUFlOzs7SUFBZjtRQUFBLGlCQVVDO1FBVEcsSUFBRyxDQUFDLElBQUksQ0FBQyxLQUFLO1lBQUUsT0FBTztRQUN2QixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFVBQUEsQ0FBQztZQUN6QixJQUFHLEtBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBQztnQkFDbEMsQ0FBQyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7YUFDckI7aUJBQUk7Z0JBQ0QsQ0FBQyxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7YUFDdEI7WUFDRCxPQUFPLENBQUMsQ0FBQztTQUNaLENBQUMsQ0FBQTtLQUNMOzs7O0lBRUQsb0NBQVk7OztJQUFaO1FBQUEsaUJBU0M7UUFSRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxVQUFBLENBQUM7WUFDWixxQkFBSSxLQUFLLEdBQUcsS0FBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUEsQ0FBQyxDQUFDO1lBQ3BELElBQUcsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUM7Z0JBQ2hCLENBQUMsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztnQkFDekIsQ0FBQyxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO2FBQ2xDO1lBQ0QsT0FBTyxDQUFDLENBQUM7U0FDWixDQUFDLENBQUM7S0FDTjs7OztJQUVELHFDQUFhOzs7SUFBYjtRQUNJLHFCQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQztRQUNqRCxxQkFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLHFCQUFxQixFQUFFLENBQUM7UUFDN0MsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQzlCLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUNoQyxJQUFJLENBQUMsY0FBYyxHQUFHLENBQUMsSUFBSSxDQUFDLFdBQVcsR0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFlBQVksR0FBQyxDQUFDLENBQUMsQ0FBQztLQUNuRTs7OztJQUVELG9DQUFZOzs7SUFBWjtRQUFBLGlCQTZEQztRQTVERyxJQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRO1lBQUUsT0FBTyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQzs7UUFHakQscUJBQUksSUFBSSxDQUFDO1FBQ1QscUJBQUksSUFBSSxDQUFDO1FBQ1QscUJBQUksSUFBSSxDQUFDO1FBQ1QscUJBQUksSUFBSSxDQUFDO1FBRVQsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsVUFBQSxJQUFJO1lBQ3BDLHFCQUFJLFFBQVEsR0FBRyxFQUFFLENBQUM7WUFDbEIscUJBQUksUUFBUSxHQUFHLEVBQUUsQ0FBQztZQUNsQixxQkFBSSxRQUFRLENBQUM7WUFDYixJQUFHLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLElBQUksU0FBUyxFQUFDO2dCQUVoRCxxQkFBSSxZQUFZLEdBQUcsRUFBRSxDQUFDO2dCQUN0QixJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsVUFBQSxPQUFPO29CQUVyQyxxQkFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDO29CQUNoQixxQkFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDOztvQkFFZCxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQUMsVUFBVSxFQUFDLEtBQUs7d0JBQ3pCLHFCQUFJLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQ3RCLHFCQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFFdkIsTUFBTSxJQUFNLENBQUMsU0FBSSxDQUFDLE1BQUcsQ0FBQzt3QkFDdEIsSUFBSSxJQUFHLENBQUMsS0FBSyxJQUFJLENBQUMsSUFBSSxNQUFJLENBQUMsU0FBSSxDQUFDLE1BQUcsR0FBRyxNQUFJLENBQUMsU0FBSSxDQUFDLE1BQUcsQ0FBQzt3QkFFcEQsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQzs7d0JBR2xCLElBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxHQUFHLElBQUk7NEJBQUUsSUFBSSxHQUFHLENBQUMsQ0FBQzt3QkFDL0IsSUFBRyxDQUFDLElBQUksSUFBSSxDQUFDLEdBQUcsSUFBSTs0QkFBRSxJQUFJLEdBQUcsQ0FBQyxDQUFDO3dCQUMvQixJQUFHLENBQUMsSUFBSSxJQUFJLENBQUMsR0FBRyxJQUFJOzRCQUFFLElBQUksR0FBRyxDQUFDLENBQUM7d0JBQy9CLElBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxHQUFHLElBQUk7NEJBQUUsSUFBSSxHQUFHLENBQUMsQ0FBQzt3QkFFL0IsT0FBTyxVQUFVLENBQUM7cUJBQ3JCLENBQUMsQ0FBQTtvQkFDRixNQUFNLEdBQUcsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDO29CQUN2QixJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDOztvQkFHbkIsSUFBRyxZQUFZLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBQzt3QkFDdkIsUUFBUSxHQUFHQSxlQUFtQixDQUFDLE9BQU8sQ0FBQyxDQUFDO3FCQUMzQztvQkFFRCxZQUFZLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO29CQUMxQixRQUFRLElBQUUsSUFBSSxDQUFDO2lCQUNsQixDQUFDLENBQUM7Z0JBQ0gsUUFBUSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQzthQUMvQjtZQUNELHFCQUFJLElBQUksR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQztZQUNoQyxxQkFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUM7WUFDOUIscUJBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxHQUFHLEtBQUksQ0FBQyxZQUFZLENBQUM7WUFDOUUscUJBQUksV0FBVyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQzs7O1lBR2pGLEtBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztZQUU1QyxPQUFPLEVBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBQyxDQUFBO1NBQy9ILENBQUMsQ0FBQztLQUNOOzs7O0lBRUQsc0NBQWM7OztJQUFkOztRQUVJLHFCQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO1FBQzFCLHFCQUFJLFNBQVMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVCLHFCQUFJLFVBQVUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDOztRQUc3QixxQkFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDLFdBQVcsR0FBQyxTQUFTLENBQUM7UUFDNUMscUJBQUksV0FBVyxHQUFHLElBQUksQ0FBQyxZQUFZLEdBQUMsVUFBVSxDQUFDO1FBQy9DLHFCQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBQyxVQUFVLENBQUMsQ0FBQztRQUU3QyxxQkFBSSxrQkFBa0IsR0FBRyxDQUFDLEtBQUssSUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUMsU0FBUyxHQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssSUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUMsVUFBVSxHQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7O1FBR2pGLHFCQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxHQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNELHFCQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxHQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDOztRQUczRCxJQUFJLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQztRQUMzQixJQUFJLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQztRQUMzQixJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztRQUV2QixPQUFPLENBQUMsS0FBSyxFQUFDLE9BQU8sRUFBQyxPQUFPLENBQUMsQ0FBQTtLQUNqQzs7Ozs7SUFFRCw0QkFBSTs7OztJQUFKLFVBQUssWUFBWTtRQUNiLElBQUcsWUFBWSxFQUFDO1lBQ1osSUFBSSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEVBQUMsWUFBWSxDQUFDLENBQUM7U0FDNUM7S0FDSjs7Ozs7SUFFRCwrQkFBTzs7OztJQUFQLFVBQVEsWUFBWTs7UUFFaEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMxQyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQzdDOzs7O0lBRUQsc0NBQWM7OztJQUFkO1FBQ0ksSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUN0QixJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7S0FDdEI7Ozs7SUFFRCxtQ0FBVzs7O0lBQVg7UUFDSSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLEdBQUMsSUFBSSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQ2hCLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQ2hCLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztLQUN0Qjs7Ozs7SUFFRCwrQkFBTzs7OztJQUFQLFVBQVEsRUFBRTs7UUFFTixxQkFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLFNBQVMsR0FBQyxDQUFDLENBQUM7UUFDbkMsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFDLFdBQVcsQ0FBQztRQUN0QyxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0tBQ3hCOzs7OztJQUVELDhCQUFNOzs7O0lBQU4sVUFBTyxFQUFFO1FBQ0wscUJBQUksV0FBVyxHQUFHLElBQUksQ0FBQyxTQUFTLEdBQUMsQ0FBQyxDQUFDO1FBQ25DLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBQyxXQUFXLENBQUM7UUFDdEMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQztLQUN4Qjs7Ozs7O0lBRUQsbUNBQVc7Ozs7O0lBQVgsVUFBWSxFQUFHLEVBQUMsWUFBYTtRQUV6QixxQkFBSSxLQUFLLEdBQUcsRUFBRSxDQUFDO1FBRWYsSUFBRyxZQUFZLEVBQUM7WUFDWixxQkFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMxRCxxQkFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUM3RDthQUFJO1lBQ0QsRUFBRSxHQUFHLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUNwQyxFQUFFLEdBQUcsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1NBQ3ZDOzs7Ozs7Ozs7OztRQWNELHFCQUFJLFFBQVEsR0FBR0MsU0FBWSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxLQUFLLENBQUM7UUFDbEQscUJBQUksT0FBTyxHQUFHQSxTQUFZLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztRQUNyRCxxQkFBSSxLQUFLLEdBQUcsV0FBUyxJQUFJLENBQUMsTUFBTSxTQUFJLElBQUksQ0FBQyxNQUFNLE1BQUcsQ0FBQztRQUVuRCxxQkFBSSxJQUFJLEdBQUcsZUFBYSxFQUFFLFNBQUksRUFBRSxNQUFHLENBQUM7O1FBR3BDLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxHQUFDLEtBQUssR0FBQyxLQUFLLENBQUM7O0tBRXJDOzs7Ozs7SUFFRCxrQ0FBVTs7Ozs7SUFBVixVQUFXLEVBQUUsRUFBRSxJQUFJOztRQUVmLHFCQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQ3hCLHFCQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDM0MscUJBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxXQUFXLEdBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUMzQyxxQkFBSSxPQUFPLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQztRQUN6QixxQkFBSSxPQUFPLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQztRQUV6QixxQkFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEdBQUMsT0FBTyxJQUFFLEtBQUssQ0FBQztRQUNoQyxxQkFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEdBQUMsT0FBTyxJQUFFLEtBQUssQ0FBQztRQUNoQyxxQkFBSSxXQUFXLEdBQUcsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7UUFHekIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFDLENBQUMsQ0FBQztLQUNwRTs7Ozs7SUFFRCxxQ0FBYTs7OztJQUFiLFVBQWMsRUFBRTtRQUNaLElBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxFQUFFLElBQUksUUFBUTtZQUFFLE9BQU87UUFDcEMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztLQUM3Qjs7Z0JBeFhKLFNBQVMsU0FBQztvQkFDUCxRQUFRLEVBQUUsU0FBUztvQkFDbkIsUUFBUSxFQUFFLHNzRkF1RlA7b0JBQ0gsTUFBTSxFQUFFLENBQUMsNjNCQUE2M0IsQ0FBQztpQkFDMTRCOzs7O2dCQXRHUSxlQUFlO2dCQUNmLFlBQVk7OztnQ0F3R2hCLE1BQU07a0NBQ04sTUFBTTt5QkFFTixLQUFLOzJCQUNMLEtBQUs7OEJBQ0wsS0FBSzs0QkFDTCxLQUFLOzZCQUNMLEtBQUs7a0NBR0wsS0FBSztpQ0FDTCxLQUFLO2tDQTBCTCxTQUFTLFNBQUMsUUFBUTs7d0JBL0l2Qjs7Ozs7OztBQ0FBOzt1QkFLc0IsSUFBSSxZQUFZLEVBQUU7c0JBQ25CLElBQUksWUFBWSxFQUFFO3dCQUNoQixJQUFJLFlBQVksRUFBRTtvQkFDdEIsSUFBSSxZQUFZLEVBQUU7dUJBQ2YsSUFBSSxZQUFZLEVBQUU7dUJBQ2xCLElBQUksWUFBWSxFQUFFOzJCQUNkLElBQUksWUFBWSxFQUFFO3lCQUViLEtBQUs7d0JBQ04sS0FBSzs7Ozs7O0lBS08sa0RBQWtCOzs7O2NBQUMsS0FBVTtRQUNuRSxJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDOzs7Ozs7SUFHZSxtREFBbUI7Ozs7Y0FBQyxLQUFVO1FBQ3hFLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7Ozs7OztJQUdhLDhDQUFjOzs7O2NBQUMsS0FBVTtRQUNqRSxJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDOzs7Ozs7SUFJN0IseUNBQVM7Ozs7Y0FBQyxFQUFnQjtRQUN0QixJQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxFQUFDO1lBQ3ZCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQ3RCO1FBQ0QsSUFBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFNBQVMsRUFBQztZQUNyQixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUN2QjtRQUNELElBQUcsRUFBRSxDQUFDLEdBQUcsSUFBSSxLQUFLLEVBQUM7O1lBRWpCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1lBQ3JCLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQ3pCO1FBQ0QsSUFBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFNBQVMsRUFBQztZQUNyQixJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUM3Qjs7Ozs7O0lBSUwsdUNBQU87Ozs7Y0FBQyxFQUFnQjtRQUNwQixJQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksS0FBSyxFQUFDOztZQUVqQixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztZQUN0QixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUMxQjtRQUNELElBQUcsRUFBRSxDQUFDLEdBQUcsSUFBSSxTQUFTLEVBQUM7WUFDckIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDOUI7Ozs7OztJQUtMLDRDQUFZOzs7O2NBQUMsRUFBYztRQUV2QixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQzs7UUFHdEIsSUFBRyxFQUFFLENBQUMsTUFBTSxJQUFJLENBQUM7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztRQUV4QyxJQUFHLElBQUksQ0FBQyxRQUFRLEVBQUM7WUFDZixJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUM7WUFDekIsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDO1lBQ3pCLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3hCLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBQyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztTQUM3Qzs7Ozs7O0lBSUwsMkNBQVc7Ozs7Y0FBQyxFQUFjO1FBQ3RCLElBQUcsSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFDO1lBQy9CLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sR0FBQyxJQUFJLENBQUMsTUFBTSxFQUFDLEVBQUUsQ0FBQyxPQUFPLEdBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7U0FDbkU7Ozs7OztJQUlMLHlDQUFTOzs7O2NBQUMsRUFBYztRQUNwQixJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztRQUN2QixJQUFHLElBQUksQ0FBQyxRQUFRLEVBQUM7WUFDZixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztZQUN0QixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN6QixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEdBQUMsSUFBSSxDQUFDLE1BQU0sRUFBQyxFQUFFLENBQUMsT0FBTyxHQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1NBQ3BFOzs7Ozs7SUFHTCw4Q0FBYzs7OztJQUFkLFVBQWUsS0FBVTtRQUN2QixxQkFBSSxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssSUFBSSxLQUFLLENBQUM7UUFDbEMscUJBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLFVBQVUsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO1FBQzNFLElBQUcsS0FBSyxHQUFHLENBQUMsRUFBRTtZQUNWLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQzNCO2FBQU0sSUFBRyxLQUFLLEdBQUcsQ0FBQyxFQUFFO1lBQ2pCLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQzVCOztRQUVELEtBQUssQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDOztRQUUxQixJQUFHLEtBQUssQ0FBQyxjQUFjLEVBQUU7WUFDckIsS0FBSyxDQUFDLGNBQWMsRUFBRSxDQUFDO1NBQzFCO0tBQ0Y7O2dCQTNHRixTQUFTLFNBQUMsRUFBRSxRQUFRLEVBQUUsZ0JBQWdCLEVBQUU7Ozs7NEJBR3RDLE1BQU07MkJBQ04sTUFBTTs2QkFDTixNQUFNO3lCQUNOLE1BQU07NEJBQ04sTUFBTTs0QkFDTixNQUFNO2dDQUNOLE1BQU07dUNBUU4sWUFBWSxTQUFDLFlBQVksRUFBRSxDQUFDLFFBQVEsQ0FBQzt3Q0FJckMsWUFBWSxTQUFDLGdCQUFnQixFQUFFLENBQUMsUUFBUSxDQUFDO21DQUl6QyxZQUFZLFNBQUMsY0FBYyxFQUFFLENBQUMsUUFBUSxDQUFDOzhCQUl2QyxZQUFZLFNBQUMsa0JBQWtCLEVBQUUsQ0FBQyxRQUFRLENBQUM7NEJBa0IzQyxZQUFZLFNBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxRQUFRLENBQUM7aUNBYXpDLFlBQVksU0FBQyxXQUFXLEVBQUUsQ0FBQyxRQUFRLENBQUM7Z0NBZ0JwQyxZQUFZLFNBQUMsV0FBVyxFQUFFLENBQUMsUUFBUSxDQUFDOzhCQU9wQyxZQUFZLFNBQUMsU0FBUyxFQUFFLENBQUMsUUFBUSxDQUFDOztnQ0FyRnJDOzs7Ozs7O0FDQUE7Ozs7Z0JBYUMsUUFBUSxTQUFDO29CQUNSLE9BQU8sRUFBRTt3QkFDUCxZQUFZO3dCQUNaLHVCQUF1Qjt3QkFDdkIsYUFBYTt3QkFDYixnQkFBZ0I7cUJBQ2pCO29CQUNELFlBQVksRUFBRSxDQUFDLGFBQWEsRUFBRSxxQkFBcUIsQ0FBQztvQkFDcEQsT0FBTyxFQUFFLENBQUMsYUFBYSxDQUFDO2lCQUN6Qjs7cUJBdEJEOzs7Ozs7Ozs7Ozs7Ozs7In0=","var map = {\n\t\"./N3Lexer\": \"./node_modules/n3/lib/N3Lexer.js\",\n\t\"./N3Lexer.js\": \"./node_modules/n3/lib/N3Lexer.js\",\n\t\"./N3Parser\": \"./node_modules/n3/lib/N3Parser.js\",\n\t\"./N3Parser.js\": \"./node_modules/n3/lib/N3Parser.js\",\n\t\"./N3Store\": \"./node_modules/n3/lib/N3Store.js\",\n\t\"./N3Store.js\": \"./node_modules/n3/lib/N3Store.js\",\n\t\"./N3StreamParser\": \"./node_modules/n3/lib/N3StreamParser.js\",\n\t\"./N3StreamParser.js\": \"./node_modules/n3/lib/N3StreamParser.js\",\n\t\"./N3StreamWriter\": \"./node_modules/n3/lib/N3StreamWriter.js\",\n\t\"./N3StreamWriter.js\": \"./node_modules/n3/lib/N3StreamWriter.js\",\n\t\"./N3Util\": \"./node_modules/n3/lib/N3Util.js\",\n\t\"./N3Util.js\": \"./node_modules/n3/lib/N3Util.js\",\n\t\"./N3Writer\": \"./node_modules/n3/lib/N3Writer.js\",\n\t\"./N3Writer.js\": \"./node_modules/n3/lib/N3Writer.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\tvar module = __webpack_require__(id);\n\treturn module;\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error('Cannot find module \"' + req + '\".');\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./node_modules/n3/lib sync recursive ^\\\\.\\\\/N3.*$\";","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error('Cannot find module \"' + req + '\".');\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","module.exports = \".button-row{\\r\\n    position: absolute;\\r\\n    z-index: 100;\\r\\n}\\r\\n.button-row > button {\\r\\n    margin-right: 10px;\\r\\n}\\r\\n.selected {\\r\\n    color:red;\\r\\n}\\r\\n.drag-card{\\r\\n    position: absolute;\\r\\n    left: 100px;\\r\\n    top: 100px;\\r\\n    background-color: rgba(220,220,220,.6);\\r\\n    border-radius: 5px;\\r\\n    font-family: roboto;\\r\\n    font-size: 0.7em;\\r\\n    padding: 0px;\\r\\n    z-index: 110;\\r\\n}\"","module.exports = \"<div class=\\\"button-row\\\">\\r\\n    <button \\r\\n        *ngFor=\\\"let btn of buttons\\\" \\r\\n        mat-raised-button \\r\\n        [disabled]=\\\"btn == selectedButton\\\"\\r\\n        (click)=\\\"switchModule(btn)\\\">\\r\\n        {{btn}}\\r\\n    </button>\\r\\n</div>\\r\\n\\r\\n<!-- ng-plan module -->\\r\\n<ng-plan\\r\\n    [hidden]=\\\"selectedButton != 'ng-plan'\\\"\\r\\n    [data]=\\\"data\\\"\\r\\n    toolbar=\\\"true\\\"\\r\\n    (clickedRoom)=\\\"roomClick($event)\\\"\\r\\n    (clickedCanvas)=\\\"canvasClick()\\\"\\r\\n    [selected]=\\\"selectedSpaces\\\">\\r\\n</ng-plan>\\r\\n\\r\\n<!-- ng-mesh-viewer module -->\\r\\n<ng-mesh-viewer\\r\\n    [hidden]=\\\"selectedButton != 'ng-mesh-viewer'\\\"\\r\\n    [showCentroids]=\\\"true\\\"\\r\\n    (clickedRoom)=\\\"log($event)\\\"\\r\\n    [data]=\\\"data\\\">\\r\\n</ng-mesh-viewer>\\r\\n\\r\\n<!-- Popups -->\\r\\n<div *ngIf=\\\"query\\\" ngDraggable class=\\\"drag-card\\\">\\r\\n    <div [innerHTML]=\\\"query|MarkdownToHtml\\\"></div>\\r\\n    <button mat-raised-button (click)=\\\"query = null\\\">Got it!</button>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport { AppService } from './app.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css'],\n  providers: [ AppService ]\n})\nexport class AppComponent implements OnInit {\n\n  public query;\n  public data;\n  public selectedSpaces;\n  public buttons = [\"ng-plan\", \"ng-mesh-viewer\"];\n  public selectedButton = \"ng-plan\";\n\n  constructor(\n    private http: HttpClient,\n    private _s: AppService\n  ) { }\n\n  ngOnInit(){\n    this.switchModule(\"ng-plan\");\n  }\n\n  switchModule(name){\n\n    this.selectedButton = name;\n\n    if(name == \"ng-plan\"){\n      this.http.get('./assets/test-plan.json').subscribe(res => {\n        this.data = res;\n      })\n    }\n\n    if(name == \"ng-mesh-viewer\"){\n\n      this._s.getRooms3D().subscribe(res => {\n        this.data = res.data;\n        this.query = res.query;\n      }, err => console.log(err));\n\n    }\n\n  }\n\n  roomClick(ev){\n    this.selectedSpaces = [ev.uri];\n  }\n\n  log(ev){\n    var uri = ev.uri;\n    console.log(uri);\n\n    this._s.getType(uri).subscribe(res => {\n      if(res == \"Space\"){\n        this._s.getAdjElements(uri).subscribe(res => {\n          this.data = res.data;\n          this.query = res.query;\n        }, err => console.log(err));\n      }else{\n        this.switchModule(\"ng-mesh-viewer\");\n      }\n    }, err => console.log(err));\n\n    \n  }\n\n  canvasClick(){\n    this.selectedSpaces = [];\n  }\n\n}","import { BrowserModule } from '@angular/platform-browser';\nimport { HttpClientModule } from '@angular/common/http';\nimport { NgModule } from '@angular/core';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n\n// Project modules\nimport { PlanModule } from 'ng-plan';\nimport { MeshViewerModule } from 'ng-mesh-viewer';\n\n// Angular material\nimport { MatButtonModule } from '@angular/material';\n\n// Draggable\nimport { AngularDraggableModule } from 'angular2-draggable';\n\n// Markdown pipe\nimport { MarkdownToHtmlModule } from 'markdown-to-html-pipe';\n\nimport { AppComponent } from './app.component';\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    HttpClientModule,\n    PlanModule,\n    MeshViewerModule,\n    MatButtonModule,\n    BrowserAnimationsModule,\n    AngularDraggableModule,\n    MarkdownToHtmlModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Injectable } from '@angular/core';\r\nimport * as rdfstore from 'rdfstore';\r\nimport { Observable, from } from \"rxjs\";\r\nimport { map } from 'rxjs/operators';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport * as THREE from 'three';\r\n\r\n@Injectable()\r\nexport class AppService {\r\n\r\n    // private filePaths = [\r\n    //     \"./assets/Duplex/BOT.ttl\",\r\n    //     \"./assets/Duplex/classes.ttl\",\r\n    //     \"./assets/Duplex/PROPS.ttl\",\r\n    //     \"./assets/Duplex/geometry3d.ttl\"\r\n    // ];\r\n    private filePaths = [\r\n        \"./assets/OSH/BOT.ttl\",\r\n        \"./assets/OSH/geometry3d.ttl\",\r\n        \"./assets/OSH/classes.ttl\",\r\n        \"./assets/OSH/PROPS.ttl\"\r\n    ];\r\n    private store;\r\n\r\n    constructor( public http: HttpClient ) { }\r\n\r\n    public getQuery(query): Observable<any> {\r\n\r\n        return from(this._loadAndQuery(query));\r\n        // return this.http.get(this.filePaths[0], {responseType: 'text'})\r\n\r\n    }\r\n\r\n    public getType(uri): Observable<any> {\r\n        var q = `SELECT ?type WHERE {<${uri}> a ?type}`;\r\n\r\n        return from(this._loadAndQuery(q))\r\n            .pipe(\r\n                map(data => {\r\n                    var sp = data.filter(d => {\r\n                        return d.type.value == \"https://w3id.org/bot#Space\";\r\n                    });\r\n                    if(sp.length != 0){\r\n                        return \"Space\";\r\n                    }else{\r\n                        return \"Element\";\r\n                    }\r\n                })\r\n            );\r\n    }\r\n\r\n    public getElements3D(): Observable<any> {\r\n        var q = `\r\n            PREFIX bot:    <https://w3id.org/bot#>\r\n            PREFIX props:  <https://w3id.org/props#>\r\n            PREFIX opm:    <https://w3id.org/opm#>\r\n            PREFIX schema: <http://schema.org/>\r\n            SELECT ?uri ?name ?geometry\r\n            WHERE {\r\n                ?uri a bot:Element ;\r\n                    props:identityDataName/opm:hasPropertyState ?ns ;\r\n                    bot:hasSimple3DModel ?geometry .\r\n                ?ns a opm:CurrentPropertyState ;\r\n                    schema:value ?name .\r\n            } LIMIT 20\r\n        `;\r\n\r\n        return from(this._loadAndQuery(q))\r\n                .pipe(\r\n                    map(data => {\r\n                        return data.map(item => {\r\n                            return {\r\n                                name: item.name.value, \r\n                                uri: item.uri.value,\r\n                                geometry: item.geometry.value\r\n                            }\r\n                        })\r\n                    })\r\n                );\r\n    }\r\n\r\n    public getAdjElements(spaceURI): Observable<any> {\r\n        var q = `\r\n            PREFIX bot:    <https://w3id.org/bot#>\\n\r\n            PREFIX props:  <https://w3id.org/props#>\\n\r\n            PREFIX opm:    <https://w3id.org/opm#>\\n\r\n            PREFIX schema: <http://schema.org/>\\n\r\n            SELECT ?uri ?name ?geometry\\n\r\n            WHERE {\\n\r\n                <${spaceURI}> bot:adjacentElement ?uri .\\n\r\n                ?uri props:identityDataName/opm:hasPropertyState ?ns ;\\n\r\n                    bot:hasSimple3DModel ?geometry .\\n\r\n                ?ns a opm:CurrentPropertyState ;\\n\r\n                    schema:value ?name .\\n\r\n            }\r\n        `;\r\n\r\n        return from(this._loadAndQuery(q))\r\n                .pipe(\r\n                    map(data => {\r\n                        var d = data.map(item => {\r\n                            return {\r\n                                name: item.name.value, \r\n                                uri: item.uri.value,\r\n                                geometry: item.geometry.value\r\n                            }\r\n                        });\r\n                        return {data: d, query: q};\r\n                    })\r\n                );\r\n    }\r\n\r\n    public getRooms3D(): Observable<any> {\r\n\r\n        var q = `\r\n            PREFIX bot:    <https://w3id.org/bot#>\\n\r\n            PREFIX props:  <https://w3id.org/props#>\\n\r\n            PREFIX opm:    <https://w3id.org/opm#>\\n\r\n            PREFIX schema: <http://schema.org/>\\n\r\n            SELECT ?uri ?name ?geometry\\n\r\n            WHERE {\\n\r\n                \\t?uri a bot:Space ;\\n\r\n                \\t\\tprops:identityDataName/opm:hasPropertyState ?ns ;\\n\r\n                \\t\\tbot:hasSimple3DModel ?geometry .\\n\r\n                \\t?ns a opm:CurrentPropertyState ;\\n\r\n                \\t\\tschema:value ?name .\\n\r\n            }\r\n        `;\r\n\r\n        return from(this._loadAndQuery(q))\r\n                .pipe(\r\n                    map(data => {\r\n                        var d = data.map(item => {\r\n                            return {\r\n                                name: item.name.value, \r\n                                uri: item.uri.value,\r\n                                geometry: item.geometry.value\r\n                            }\r\n                        });\r\n                        return {data: d, query: q};\r\n                    })\r\n                );\r\n\r\n    }\r\n\r\n    private async _loadAndQuery(query): Promise<any> {\r\n\r\n        // Create store and load triples if it does not already exist\r\n        if(!this.store){\r\n\r\n            var createStorePromise = this._createStore();\r\n            \r\n            // Get file content\r\n            var promises = [];\r\n            for(var p of this.filePaths){\r\n                var promise = this.http.get(p, {responseType: 'text'}).toPromise();\r\n                promises.push(promise);\r\n            }\r\n    \r\n            // Continue when all triples are available and store is created\r\n            var triples = await Promise.all(promises);\r\n            this.store = await createStorePromise;\r\n\r\n            // Load triples into store\r\n            var counter = 0;\r\n            for(var t of triples){\r\n                var inserted = await this._loadTriplesInStore(this.store, t);\r\n                counter+= Number(inserted);\r\n            }\r\n\r\n            console.log(\"Added \" + counter + \" triples to memory.\");\r\n\r\n        }\r\n\r\n        // Query the store\r\n        var qResPromise = this._executeQuery(this.store, query);\r\n        \r\n        return qResPromise;\r\n\r\n    }\r\n\r\n    private _createStore(){\r\n        return new Promise( (resolve, reject) => {\r\n            rdfstore.create((err, store) => {\r\n                if(err) reject(err);\r\n                resolve(store);\r\n            });\r\n        })\r\n    }\r\n\r\n    private _loadTriplesInStore(store, triples, mimeType?){\r\n        if(!mimeType) mimeType = 'text/turtle';\r\n        return new Promise((resolve, reject) => {\r\n            store.load(mimeType, triples, (err, size) => {\r\n                if(err) reject(err);\r\n                resolve(size);\r\n            })\r\n        })\r\n    }\r\n\r\n    private _executeQuery(store, query){\r\n        return new Promise((resolve, reject) => {\r\n            store.execute(query, (err, res) => {\r\n                if(err) reject(err);\r\n                resolve(res);\r\n            })\r\n        })\r\n    }\r\n\r\n    private _getGraphSize(){\r\n        return new Promise((resolve, reject) => {\r\n            this.store.graph((err, graph) => {\r\n                if(err) reject(err);\r\n                resolve(graph.x);\r\n            });\r\n        })\r\n    }\r\n\r\n}","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * In development mode, to ignore zone related error stack frames such as\n * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can\n * import the following file, but please comment it out in production mode\n * because it will have performance impact when throw error\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n","/* (ignored) */","/* (ignored) */","/* (ignored) */"],"sourceRoot":""}